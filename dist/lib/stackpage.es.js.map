{"version":3,"file":"stackpage.es.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../src/lib/grid-stack-context.ts","../../src/lib/grid-stack-provider.tsx","../../src/lib/grid-stack-render-context.ts","../../node_modules/react-fast-compare/index.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/lib/grid-stack-render-provider.tsx","../../src/lib/grid-stack-widget-context.ts","../../src/lib/grid-stack-Item-menu.tsx","../../src/lib/grid-stack-autoresizer.tsx","../../src/lib/grid-stack-widget-render.tsx","../../src/lib/grid-stack-render.tsx","../../node_modules/@heroicons/react/24/outline/esm/ArrowLeftCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowPathIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronRightIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CloudArrowDownIcon.js","../../node_modules/@heroicons/react/24/outline/esm/EyeIcon.js","../../node_modules/@heroicons/react/24/outline/esm/InformationCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PencilIcon.js","../../node_modules/@heroicons/react/24/outline/esm/TrashIcon.js","../../src/lib/components/Text.tsx","../../src/lib/components/stackoptions.ts","../../src/lib/components/stackactions.tsx","../../src/lib/components/pageinfo.tsx","../../src/lib/components/pageinfodialog.tsx","../../src/lib/components/deletedropzone.tsx","../../src/lib/components/stackpage.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import type { GridStack, GridStackOptions, GridStackWidget } from \"gridstack\";\nimport { createContext, useContext } from \"react\";\n\nexport const GridStackContext = createContext<{\n  initialOptions: GridStackOptions;\n  gridStack: GridStack | null;\n  addWidget: (fn: (id: string) => Omit<GridStackWidget, \"id\">) => void;\n  removeWidget: (id: string) => void;\n  addSubGrid: (\n    fn: (\n      id: string,\n      withWidget: (w: Omit<GridStackWidget, \"id\">) => GridStackWidget\n    ) => Omit<GridStackWidget, \"id\">\n  ) => void;\n  saveOptions: () => GridStackOptions | GridStackWidget[] | undefined;\n\n  _gridStack: {\n    value: GridStack | null;\n    set: React.Dispatch<React.SetStateAction<GridStack | null>>;\n  };\n  _rawWidgetMetaMap: {\n    value: Map<string, GridStackWidget>;\n    set: React.Dispatch<React.SetStateAction<Map<string, GridStackWidget>>>;\n  };\n} | null>(null);\n\nexport function useGridStackContext() {\n  const context = useContext(GridStackContext);\n  if (!context) {\n    throw new Error(\n      \"useGridStackContext must be used within a GridStackProvider\"\n    );\n  }\n  return context;\n}\n","import type { GridStack, GridStackOptions, GridStackWidget } from \"gridstack\";\nimport { type PropsWithChildren, useCallback, useState } from \"react\";\nimport { GridStackContext } from \"./grid-stack-context\";\n\nexport function GridStackProvider({\n  children,\n  initialOptions,\n}: PropsWithChildren<{ initialOptions: GridStackOptions }>) {\n  const [gridStack, setGridStack] = useState<GridStack | null>(null);\n  const [rawWidgetMetaMap, setRawWidgetMetaMap] = useState(() => {\n    const map = new Map<string, GridStackWidget>();\n    const deepFindNodeWithContent = (obj: GridStackWidget) => {\n      if (obj.id && obj.content) {\n        map.set(obj.id, obj);\n      }\n      if (obj.subGridOpts?.children) {\n        obj.subGridOpts.children.forEach((child: GridStackWidget) => {\n          deepFindNodeWithContent(child);\n        });\n      }\n    };\n    initialOptions.children?.forEach((child: GridStackWidget) => {\n      deepFindNodeWithContent(child);\n    });\n    return map;\n  });\n\n  const addWidget = useCallback(\n    (fn: (id: string) => Omit<GridStackWidget, \"id\">) => {\n      const newId = `widget-${Math.random().toString(36).substring(2, 15)}`;\n      const widget = fn(newId);\n      gridStack?.addWidget({ ...widget, id: newId });\n      setRawWidgetMetaMap((prev) => {\n        const newMap = new Map<string, GridStackWidget>(prev);\n        newMap.set(newId, widget);\n        return newMap;\n      });\n    },\n    [gridStack]\n  );\n\n  const addSubGrid = useCallback(\n    (\n      fn: (\n        id: string,\n        withWidget: (w: Omit<GridStackWidget, \"id\">) => GridStackWidget\n      ) => Omit<GridStackWidget, \"id\">\n    ) => {\n      const newId = `sub-grid-${Math.random().toString(36).substring(2, 15)}`;\n      const subWidgetIdMap = new Map<string, GridStackWidget>();\n\n      const widget = fn(newId, (w) => {\n        const subWidgetId = `widget-${Math.random()\n          .toString(36)\n          .substring(2, 15)}`;\n        subWidgetIdMap.set(subWidgetId, w);\n        return { ...w, id: subWidgetId };\n      });\n\n      gridStack?.addWidget({ ...widget, id: newId });\n\n      setRawWidgetMetaMap((prev) => {\n        const newMap = new Map<string, GridStackWidget>(prev);\n        subWidgetIdMap.forEach((meta, id) => {\n          newMap.set(id, meta);\n        });\n        return newMap;\n      });\n    },\n    [gridStack]\n  );\n\n  const removeWidget = useCallback(\n    (id: string) => {\n      gridStack?.removeWidget(id);\n      setRawWidgetMetaMap((prev) => {\n        const newMap = new Map<string, GridStackWidget>(prev);\n        newMap.delete(id);\n        return newMap;\n      });\n    },\n    [gridStack]\n  );\n\n  const saveOptions = useCallback(() => {\n    return gridStack?.save(true, true, (_, widget) => widget);\n  }, [gridStack]);\n\n  return (\n    <GridStackContext.Provider\n      value={{\n        initialOptions,\n        gridStack,\n\n        addWidget,\n        removeWidget,\n        addSubGrid,\n        saveOptions,\n\n        _gridStack: {\n          value: gridStack,\n          set: setGridStack,\n        },\n        _rawWidgetMetaMap: {\n          value: rawWidgetMetaMap,\n          set: setRawWidgetMetaMap,\n        },\n      }}\n    >\n      {children}\n    </GridStackContext.Provider>\n  );\n}","import { createContext, useContext } from \"react\";\n\nexport const GridStackRenderContext = createContext<{\n  getWidgetContainer: (widgetId: string) => HTMLElement | null;\n} | null>(null);\n\nexport function useGridStackRenderContext() {\n  const context = useContext(GridStackRenderContext);\n  if (!context) {\n    throw new Error(\n      \"useGridStackRenderContext must be used within a GridStackProvider\"\n    );\n  }\n  return context;\n}\n","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import {\n  PropsWithChildren,\n  useCallback,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { useGridStackContext } from \"./grid-stack-context\";\nimport {\n  GridItemHTMLElement,\n  GridStack,\n  GridStackOptions,\n  GridStackWidget,\n} from \"gridstack\";\nimport { GridStackRenderContext } from \"./grid-stack-render-context\";\nimport isEqual from \"react-fast-compare\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport interface GridStackDropEvent {\n  name: string;\n  id: string;\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n}\n\nexport type GridStackDropEventCallback = (event: GridStackDropEvent) => void;\n\n// Override the default resizeToContent method to ensure content.firstChildElement is null error, \n// because resizeToContent called by GridStack before React DOM mounted and rendered\nconst originalResizeToContent = GridStack.prototype.resizeToContent;\nGridStack.prototype.resizeToContent = function(el: GridItemHTMLElement) {\n  const content = el.querySelector('.grid-stack-item-content');\n  const first = content?.firstElementChild;\n  if (!first) {\n    // Silently skip\n    return;\n  }\n  return originalResizeToContent.call(this, el);\n};\n\nexport function GridStackRenderProvider({\n  children,\n  onGridStackDropEvent,\n}: PropsWithChildren<{ onGridStackDropEvent?: GridStackDropEventCallback }>) {\n  const {\n    _gridStack: { value: gridStack, set: setGridStack },\n    initialOptions,\n  } = useGridStackContext();\n\n  const widgetContainersRef = useRef<Map<string, HTMLElement>>(new Map());\n  const containerRef = useRef<HTMLDivElement>(null);\n  const optionsRef = useRef<GridStackOptions>(initialOptions);\n\n  const renderCBFn = useCallback(\n    (element: HTMLElement, widget: GridStackWidget) => {\n      if (widget.id) {\n        widgetContainersRef.current.set(widget.id, element);\n      }\n    },\n    []\n  );\n\n  const initGrid = useCallback(() => {\n    if (containerRef.current) {\n      GridStack.renderCB = renderCBFn;\n\n      const grid = GridStack.init(optionsRef.current, containerRef.current);\n\n      // Enable drag-and-drop from external sources\n      GridStack.setupDragIn(\".grid-stack-item-widget\", {\n         appendTo: \"body\", \n         helper: \"clone\",\n         scroll: false,\n      }\n    );\n            \n      // grid.on('added removed change', function(e:any, items: any) {\n      //   let str = '';\n      //   items.forEach(function(item:any) { str += ' (x,y)=' + item.x + ',' + item.y; });\n      //   console.log(e.type + ' ' + items.length + ' items:' + str );\n      // });\n\n      // grid.on('drag', function(event: any, el) {\n      //   //const n = el.gridstackNode;\n      //   const x = el.getAttribute('gs-x'); // verify node (easiest) and attr are the same\n      //   const y = el.getAttribute('gs-y');\n      //   // console.log((g || el.gridstackNode.grid.opts.id) + ' drag ' + (n.content || '') + ' pos: (' + n.x + ',' + n.y + ') = (' + x + ',' + y + ')');\n      //   console.log(\"drag...\", x, y, event.target)\n      // })\n\n      // grid.on('dragstop', function(event: any, el) {\n      //   //let n = el.gridstackNode;\n      //   const x = el.getAttribute('gs-x'); // verify node (easiest) and attr are the same\n      //   const y = el.getAttribute('gs-y');\n      //   //console.log((g || el.gridstackNode.grid.opts.id) + ' dragstop ' + (n.content || '') + ' pos: (' + n.x + ',' + n.y + ') = (' + x + ',' + y + ')');\n      //   console.log(\"dragstop\", x, y, event.target);\n      // });\n\n      grid.on(\"dropped\", function (_event, _previousNode, newNode) {    \n        console.log(\"dropped....\", newNode);\n        \n        if (newNode) {\n          // Remove the node that gridstack added\n          const el: any = newNode.el;\n          const type: string = el.dataset.gsType;\n          if (type && onGridStackDropEvent) {\n            const dropEvent: GridStackDropEvent = {\n              name: type,\n              id: uuidv4(),\n              x: newNode.x || 0,\n              y: newNode.y || 0,\n              w: type === \"SubGrid\" ? 12 : 4, // SubGrid takes full width\n              h: type === \"SubGrid\" ? 6 : 4,  // SubGrid is taller              \n            };\n            onGridStackDropEvent(dropEvent);\n            //remove el.gridstackNode from gridstack\n            //add by callback\n            grid.removeWidget(el, true);\n          }\n          //if drag from SubGrid, that's OK,           \n        }\n      });\n\n      return grid;\n    }\n\n    return null;\n  }, [renderCBFn, onGridStackDropEvent]);\n\n\n  useLayoutEffect(() => {\n    if (!isEqual(initialOptions, optionsRef.current) && gridStack) {\n      try {\n        gridStack.removeAll(false);\n        gridStack.destroy(false);\n        widgetContainersRef.current.clear();\n        optionsRef.current = initialOptions;\n        setGridStack(initGrid());\n      } catch (e) {\n        console.error(\"Error reinitializing gridstack\", e);\n      }\n    }\n  }, [initialOptions, gridStack, initGrid, setGridStack]);\n\n  useLayoutEffect(() => {\n    if (!gridStack) {\n      try {\n        setGridStack(initGrid());\n      } catch (e) {\n        console.error(\"Error initializing gridstack\", e);\n      }\n    }\n  }, [gridStack, initGrid, setGridStack]);\n\n  return (\n    <GridStackRenderContext.Provider\n      value={useMemo(\n        () => ({\n          getWidgetContainer: (widgetId: string) => {\n            return widgetContainersRef.current.get(widgetId) || null;\n          },\n        }),\n        // ! gridStack is required to reinitialize the grid when the options change\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [gridStack]\n      )}\n    >\n      <div ref={containerRef}>{gridStack ? children : null}</div>\n    </GridStackRenderContext.Provider>\n  );\n}\n","import { createContext, useContext } from \"react\";\n\n// TODO: support full widget metadata\nexport const GridStackWidgetContext = createContext<{\n  widget: {\n    id: string;\n  };\n} | null>(null);\n\nexport function useGridStackWidgetContext() {\n  const context = useContext(GridStackWidgetContext);\n  if (!context) {\n    throw new Error(\n      \"useGridStackWidgetContext must be used within a GridStackWidgetProvider\"\n    );\n  }\n  return context;\n}\n","import * as React from 'react';\nimport { useGridStackContext } from \"./grid-stack-context\";\n\nexport interface GridStackItemMenuProps {\n  widgetId: string;\n  title?: string;\n}\n\nexport function GridStackItemMenu({ \n  widgetId,\n}: GridStackItemMenuProps) {    \n  const { removeWidget } = useGridStackContext();\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n  const [menuPosition, setMenuPosition] = React.useState({ top: 0, left: 0 });\n  const menuButtonRef = React.useRef<HTMLButtonElement>(null);\n  \n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    if (menuButtonRef.current) {\n      const rect = menuButtonRef.current.getBoundingClientRect();\n      setMenuPosition({\n        top: rect.bottom + window.scrollY,\n        left: rect.left + window.scrollX,\n      });\n    }\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  const handleClose = () => {\n    setIsMenuOpen(false);\n  };\n\n  const handleDelete = () => {\n    // remove component from the context\n    removeWidget(widgetId);\n    // remove the widget from the gridstack\n    const el = document.querySelector(`[gs-id=\"${widgetId}\"]`) as HTMLElement | null;\n    if (el && (el as any).gridstackNode?.grid) {\n      (el as any).gridstackNode.grid.removeWidget(el, true, true); // delete from correct GridStack\n    }\n    handleClose();\n  };\n\n  // Close menu when clicking outside\n  React.useEffect(() => {\n    const handleClickOutside = (_event: MouseEvent) => {\n      if (isMenuOpen) {\n        setIsMenuOpen(false);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [isMenuOpen]);\n\n  return (\n    <div className=\"flex justify-end size-4\">\n      <button className=\"p-1 hover:bg-gray-200 rounded transition-colors\">\n        <svg \n          className=\"w-4 h-4 text-gray-600\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={2} \n            d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" \n          />\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={2} \n            d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" \n          />\n        </svg>\n      </button>\n      \n      <button\n        ref={menuButtonRef}\n        onClick={handleMenuClick}\n        className=\"p-1 hover:bg-gray-200 rounded transition-colors\"\n        aria-haspopup=\"true\"\n        aria-expanded={isMenuOpen}\n      >\n        <svg \n          className=\"w-4 h-4 text-gray-600\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={2} \n            d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" \n          />\n        </svg>\n      </button>\n\n      {/* Dropdown Menu */}\n      {isMenuOpen && (\n        <div \n          className=\"fixed z-50 mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 py-1\"\n          style={{\n            top: `${menuPosition.top}px`,\n            left: `${menuPosition.left}px`,\n            transform: 'translateX(-100%)'\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <button\n            onClick={handleDelete}\n            className=\"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors\"\n          >\n            <svg \n              className=\"w-4 h-4 mr-2\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" \n              />\n            </svg>\n            Delete\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}","import { useEffect, useRef } from \"react\";\n\nexport function GridStackAutoResizer({ widgetId, children }: {\n  widgetId: string;\n  children: React.ReactNode;\n}) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const el = container.closest(\".grid-stack-item\");\n    if (!el || !(el as any).gridstackNode?.grid) return;\n\n    const resize = () => {\n      const content = el.querySelector(\".grid-stack-item-content\");\n      if (content?.firstElementChild && (el as any).gridstackNode && (el as any).gridstackNode.grid) {\n        (el as any).gridstackNode?.grid?.resizeToContent(el);\n      }\n    };\n\n    const observer = new ResizeObserver(() => resize());\n    observer.observe(container);\n    resize(); // Initial call\n\n    return () => observer.disconnect();\n  }, [widgetId]);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"gridstack-measured-container\"\n      style={{ width: \"100%\" }}\n    >\n      {children}\n    </div>\n  );\n}\n","import { createPortal } from \"react-dom\";\nimport { GridStackWidget } from \"gridstack\";\nimport { ComponentType } from \"react\";\nimport { GridStackWidgetContext } from \"./grid-stack-widget-context\";\nimport { GridStackItemMenu } from \"./grid-stack-Item-menu\";\nimport { GridStackAutoResizer } from \"./grid-stack-autoresizer\";\n\n// Parse widget metadata into usable component info\nfunction parseWidgetMeta(meta: GridStackWidget): {\n  name: string;\n  props: object;\n  error: unknown;\n} {\n  let error = null;\n  let name = \"\";\n  let props = {};\n\n  try {\n    if (meta.content) {\n      const result = JSON.parse(meta.content) as {\n        name: string;\n        props: object;\n      };\n      name = result.name;\n      props = result.props;\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  return { name, props, error };\n}\n\nexport function GridStackWidgetRenderer({\n  id,\n  meta,\n  WidgetComponent,\n  widgetContainer,\n  showMenubar,\n}: {\n  id: string;\n  meta: GridStackWidget;\n  WidgetComponent: ComponentType<any>;\n  widgetContainer: HTMLElement;\n  showMenubar?: boolean;\n}) {\n  const componentData = parseWidgetMeta(meta);\n  const title =\n    (componentData.props as any)?.title || `Widget ${id.slice(0, 4)}`;\n\n  const content = (\n    <GridStackAutoResizer widgetId={id}>\n      {showMenubar && (\n        <div className=\"widget-header flex items-center justify-between bg-gray-100 border-b px-2 min-h-[36px]\">\n          <div className=\"font-medium truncate text-sm px-1\">{title}</div>\n          <GridStackItemMenu widgetId={id} />\n        </div>\n      )}\n      <div className=\"widget-body flex-1 min-h-[40px]\">\n        <WidgetComponent {...componentData.props} />\n      </div>\n    </GridStackAutoResizer>\n  );\n\n  return (\n    <GridStackWidgetContext.Provider value={{ widget: { id } }}>\n      {createPortal(content, widgetContainer)}\n    </GridStackWidgetContext.Provider>\n  );\n}\n","import { useGridStackContext } from \"./grid-stack-context\";\nimport { useGridStackRenderContext } from \"./grid-stack-render-context\";\nimport { GridStackWidget } from \"gridstack\";\nimport { ComponentType } from \"react\";\nimport { GridStackWidgetRenderer } from \"./grid-stack-widget-render\";\n\n// Type for component registration\nexport type ComponentMap = Record<string, ComponentType<any>>;\n\n// Widget content format\nexport interface ComponentDataType<T = object> {\n  name: string;\n  props: T;\n}\n\nfunction parseWidgetMeta(\n  meta: GridStackWidget\n): ComponentDataType & { error: unknown } {\n  let error = null;\n  let name = \"\";\n  let props = {};\n\n  try {\n    if (meta.content) {\n      const result = JSON.parse(meta.content) as {\n        name: string;\n        props: object;\n      };\n      name = result.name;\n      props = result.props;\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  return { name, props, error };\n}\n\nexport function GridStackRender({\n  componentMap,\n  showMenubar = false,\n}: {\n  componentMap: ComponentMap;\n  showMenubar?: boolean;\n}) {\n  const { _rawWidgetMetaMap } = useGridStackContext();\n  const { getWidgetContainer } = useGridStackRenderContext();\n\n  return (\n    <>\n      {/* Drop zone indicator when empty */}\n      {Array.from(_rawWidgetMetaMap.value.entries()).length === 0 && (\n        <div className=\"flex flex-col items-center justify-center h-64 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 p-8 text-center\">\n          <div className=\"text-4xl mb-4\">📦</div>\n          <h3 className=\"text-lg font-medium mb-2\">Drag Components Here</h3>\n          <p className=\"text-sm\">\n            Drag components from the Components tab in the right panel to start\n            building your layout\n          </p>\n        </div>\n      )}\n\n      {Array.from(_rawWidgetMetaMap.value.entries()).map(([id, meta]) => {\n        const { name } = parseWidgetMeta(meta);\n        const WidgetComponent = componentMap[name];\n        const widgetContainer = getWidgetContainer(id);\n\n        if (!WidgetComponent || !widgetContainer) return null;\n\n        return (\n          <GridStackWidgetRenderer\n            key={id}\n            id={id}\n            meta={meta}\n            WidgetComponent={WidgetComponent}\n            widgetContainer={widgetContainer}\n            showMenubar={showMenubar}\n          />\n        );\n      })}\n    </>\n  );\n}\n","import * as React from \"react\";\nfunction ArrowLeftCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowLeftCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 19.5 8.25 12l7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronRightIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m8.25 4.5 7.5 7.5-7.5 7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronRightIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CloudArrowDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CloudArrowDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EyeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EyeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction InformationCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(InformationCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PencilIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PencilIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;","function Text({ content }: { content: string; }) {\n  return (\n    <div className=\"flex items-start p-2 bg-white border rounded shadow-sm text-left\">\n      <div>\n        <p className=\"text-sm\">{content}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default Text;\n","import { GridStackOptions, GridStackWidget } from \"gridstack\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { ComponentMap } from \"..\";\nimport Text from \"./Text\";\n\nconst CELL_HEIGHT = \"1rem\"; //16px;\n\nconst BREAKPOINTS = [\n  //{ c: 1, w: 300 },   // 1 column on screens < 300px\n  { c: 1, w: 500 },     // 2 columns between 300px - 500px\n  { c: 3, w: 800 },     // 4 columns between 500px - 800px\n  { c: 6, w: 1024 },    // 6 columns between 800px - 1024px\n  //{ c: 8, w: 1200 },  // 8 columns on screens > 1200px\n];\n\n/**\n * Default grid options for the main grid.\n * This includes settings for accepting widgets, removable elements, and layout configurations.\n */\nexport const gridOptions: GridStackOptions = {\n  acceptWidgets: true,\n  removable: \"#trash\",\n  sizeToContent: true,\n  resizable: { handles: 'se'}, \n  minRow: 10,\n  columnOpts: {\n    breakpointForWindow: true,\n    breakpoints: BREAKPOINTS,\n    layout: \"moveScale\",\n    columnMax: 12,\n  },\n  margin: 5,\n  cellHeight: CELL_HEIGHT,  \n  \n  subGridOpts: {\n    acceptWidgets: true,\n    removable: \"#trash\",\n    resizable: { handles: 'se'}, \n    sizeToContent: true,\n    columnOpts: {\n      breakpoints: BREAKPOINTS,\n      layout: \"moveScale\",\n    },\n    margin: 5,\n    minRow: 1,\n    cellHeight: CELL_HEIGHT,\n  },\n  children: [],\n};\n\n/**\n * Default sub-grid options for nested grids.\n * This includes settings for accepting widgets, removable elements, and layout configurations.\n */\nexport const subGridOptions: GridStackOptions = {\n  acceptWidgets: true,\n  removable: \"#trash\",\n  resizable: { handles: 'se'},  \n  sizeToContent: true,  \n  subGridOpts: {\n    acceptWidgets: true,\n    removable: \"#trash\",\n    resizable: { handles: 'se'},  \n    sizeToContent: true,\n    columnOpts: {\n      breakpoints: BREAKPOINTS,\n      layout: \"moveScale\",\n    },\n    margin: 5,\n    minRow: 6,\n    cellHeight: CELL_HEIGHT,\n    children: [],\n  },\n  children: [],\n};\n\n/**\n * Page properties interface\n */\nexport interface PageProps {\n  id: string;\n  title: string;\n  description?: string;\n  image?: string;\n  tag?: string;\n  status?: string;\n  pageOptions?: any;\n  grids: GridStackOptions | GridStackWidget[] | undefined;\n}\n\n/**\n * component properties interface\n */\nexport interface ComponentProps {\n  [key: string]: any;\n}\n\n/**\n * getDefaultPageProps - Returns the default properties for a page.\n * @returns Default page properties with a unique ID and default grid options.\n */\nexport const getDefaultPageProps = (): PageProps => {\n  return {\n    id: `${uuidv4()}`,\n    title: \"untitled page\",\n    grids: gridOptions,\n  };\n};\n\n/**\n * default component properties\n * This is a default set of properties for components.\n */\nconst defaultComponentProps: ComponentProps = {\n  Text: {\n    content: `Any content other than text are what we call cards. Cards can be accessed by clicking the ➕ button or typing / at the beginning of a paragraph.\nEven better, continue typing to find the card you're looking for, hit enter, and avoid dragging your mouse altogether.\nSome cards have a handy little shortcut, to keep you on track and in flow. Use --- to divide your paragraphs with a line, or \\`\\`\\` to add a code block. You can also drag and drop images directly into the editor to bypass the menu. \nAny content other than text are what we call cards. Cards can be accessed by clicking the ➕ button or typing / at the beginning of a paragraph.`,\n    title: \"This is text card\",\n  },\n};\n\nconst defaultComponents: ComponentMap = {\n  Text,\n};\n\n/**\n * ComponentMapProvider - A function that returns a map of components.\n * This will allow for dynamic customization of components.\n */\nexport type ComponentMapProvider = () => ComponentMap;\n\n/**\n * ComponentPropsProvider - A function that returns a record of component properties.\n * This will allow for dynamic customization of component props.\n */\nexport type ComponentPropsProvider = () => Record<string, any>;\n\n/**\n * getComponentMap - Returns the default component map or merges with custom components if provided.\n * @param fn a function that returns a custom component map\n * @returns \n */\nexport const getComponentMap = (fn?: ComponentMapProvider): ComponentMap => {\n  if (fn) {\n    const customMap = fn();\n    // Merge with custom keys overriding defaults\n    return { ...defaultComponents, ...customMap };\n  }\n  return defaultComponents;\n};\n\n/**\n * getComponentProps - Returns the default component properties or merges with custom properties if provided.\n * @param fn - A function that returns custom component properties\n * @returns \n */\nexport const getComponentProps = (\n  fn?: ComponentPropsProvider\n): ComponentProps => {\n  if (fn) {\n    const customObject = fn();\n    // Merge with custom keys overriding defaults\n    return { ...defaultComponentProps, ...customObject };\n  }\n  return defaultComponentProps;\n};\n\n/**\n * Save page layout, if pageid is not the same as pageProps.id, it will as created a new page\n * @param pageid - The ID of the page to save \n * @param pageProps - The properties of the page to save\n */\nexport type SaveLayoutFn = (\n  pageid: string,\n  pageProps: PageProps\n) => Promise<void>;\nexport type LoadLayoutFn = (pageid: string) => Promise<PageProps>;\nexport type GoBackListFn = () => void;\n","import { forwardRef, useImperativeHandle } from \"react\";\nimport { useGridStackContext } from \"..\";\nimport { GridStackOptions, GridStackWidget } from \"gridstack\";\n\nexport type StackActionsRef = {\n  saveLayout: () => GridStackOptions | GridStackWidget[] | undefined;\n  addWidget: (fn: (id: string) => Omit<GridStackWidget, \"id\">) => void;\n  addSubGrid: (\n    fn: (\n      id: string,\n      withWidget: (w: Omit<GridStackWidget, \"id\">) => GridStackWidget\n    ) => Omit<GridStackWidget, \"id\">\n  ) => void;\n};\n\nconst StackActions = forwardRef<StackActionsRef>((_, ref) => {\n  const { addWidget, addSubGrid, saveOptions } = useGridStackContext();\n\n  useImperativeHandle(ref, () => ({\n    saveLayout: () => {\n      return saveOptions();\n    },\n    addWidget,\n    addSubGrid,\n  }));\n\n  return null;\n});\n\nexport default StackActions;","import { useEffect, useState } from \"react\";\nimport { GridStackOptions, GridStackWidget } from \"gridstack\";\n\nexport function PageInfo(\n  {pageInfo}: \n  {pageInfo: any\n}) {\n  const [layout, setLayout] = useState<\n    GridStackOptions | GridStackWidget[] | undefined\n  >(undefined);\n\n  useEffect(() => {\n    if (pageInfo) {\n      setLayout(pageInfo);\n    }\n  }, [pageInfo]);\n\n  return (\n    <div>\n      <div\n        style={{\n          display: \"grid\",\n          gap: \"1rem\",\n          gridTemplateColumns: \"repeat(2, 1fr)\",\n        }}\n      >\n        <div id=\"pageinfo\">\n          <pre\n            style={{\n              backgroundColor: \"#f3f4f6\",\n              padding: \"1rem\",\n              borderRadius: \"0.25rem\",\n              overflow: \"auto\",\n            }}\n          >\n            {JSON.stringify(layout || {}, null, 2)}\n          </pre>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport { PageInfo } from \"./pageinfo\";\n\ninterface PageInfoDialogsProps {\n  isOpen: boolean;\n  pageInfo: any;\n  resetOpenInfo: (open: boolean) => void;\n}\n\nexport default function PageInfoDialogs({\n  isOpen,\n  pageInfo,\n  resetOpenInfo,\n}: PageInfoDialogsProps) {\n  const [copy, setCopy] = React.useState(false);\n\n  React.useEffect(() => {\n    if (isOpen) {\n      // Component is controlled by parent via isOpen prop\n    }\n  }, [isOpen, pageInfo]);\n\n  const handleClose = () => {\n    resetOpenInfo(false);\n  };\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(\n      document.getElementById(\"pageinfo\")?.innerText || \"\"\n    );\n    setCopy(true);\n    setTimeout(() => {\n      setCopy(false);\n    }, 3000);\n  };\n\n  // Close on backdrop click\n  const handleBackdropClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.target === e.currentTarget) {\n      handleClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold truncate mr-2\">Page Information</h2>\n          <div className=\"flex items-center space-x-1 flex-shrink-0\">\n            <button\n              onClick={handleCopy}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors flex items-center relative\"\n              aria-label=\"Copy page info\"\n            >\n              <svg \n                className=\"w-5 h-5\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" \n                />\n              </svg>\n              {copy && (\n                <span className=\"absolute -top-8 -right-2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap\">\n                  copied\n                </span>\n              )}\n            </button>\n            <button\n              onClick={handleClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              aria-label=\"Close\"\n            >\n              <svg \n                className=\"w-5 h-5\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M6 18L18 6M6 6l12 12\" \n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Content - Scrollable area */}\n        <div className=\"p-4 overflow-y-auto flex-1\">\n          <PageInfo pageInfo={pageInfo} />\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-end p-4 border-t flex-shrink-0\">\n          <button\n            onClick={handleClose}\n            className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition-colors w-full sm:w-auto\"\n            autoFocus\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useCallback } from 'react';\nimport { useGridStackContext } from '@/lib/grid-stack-context';\n\nexport default function DeleteDropZone({ onDropDelete }: { onDropDelete: () => void }) {\n  const { removeWidget } = useGridStackContext();\n\n  const handleDrop = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    \n    // Get the widget ID from drag data\n    const widgetId = event.dataTransfer.getData('text/plain');\n    if (widgetId) {\n      // Remove widget from gridstack\n      const el = document.querySelector(`[gs-id=\"${widgetId}\"]`) as HTMLElement | null;\n      if (el && (el as any).gridstackNode?.grid) {\n        (el as any).gridstackNode.grid.removeWidget(el, true, true);\n      }\n      \n      // Remove from context\n      removeWidget(widgetId);\n    }\n    \n    onDropDelete();\n  }, [onDropDelete, removeWidget]);\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleDragEnter = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.currentTarget.classList.add('bg-red-200', 'border-red-400');\n  };\n\n  const handleDragLeave = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.currentTarget.classList.remove('bg-red-200', 'border-red-400');\n  };\n\n  return (\n    <div\n      id=\"trash\"\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n      onDragEnter={handleDragEnter}\n      onDragLeave={handleDragLeave}\n      className=\"bg-red-50 min-h-14 h-18 flex items-center justify-center p-0 border-2 border-dashed border-red-200 rounded-lg transition-all duration-200 hover:bg-red-100 cursor-pointer group\"\n    >\n      <div className=\"w-full h-full flex flex-col items-center justify-center m-3\">\n        <svg \n          className=\"w-14 h-14 text-red-300 group-hover:text-red-400 transition-colors\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={1.5} \n            d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" \n          />\n        </svg>\n      </div>        \n    </div>\n  );\n}","import {\n  useState,\n  useRef,\n  useEffect,\n  ReactNode,\n  createContext,\n  useContext,\n  useCallback,\n} from \"react\";\nimport {\n  ArrowLeftIcon,\n  ArrowPathIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  TrashIcon,\n  CloudArrowDownIcon,\n  EyeIcon,\n  ArrowLeftCircleIcon,\n  PencilIcon,\n  InformationCircleIcon,\n} from \"@heroicons/react/24/outline\";\n\nimport {\n  GridStackProvider,\n  GridStackRender,\n  GridStackRenderProvider,\n} from \"..\";\nimport { GridStackOptions } from \"gridstack\";\nimport {\n  gridOptions,\n  subGridOptions,\n  PageProps,\n  getDefaultPageProps,\n  getComponentMap,\n  getComponentProps,\n  ComponentMapProvider,\n  ComponentPropsProvider,\n  GoBackListFn,\n  LoadLayoutFn,\n  SaveLayoutFn,\n} from \"./stackoptions\";\n\nimport StackActions, { StackActionsRef } from \"./stackactions\";\nimport { GridStackDropEvent } from \"../grid-stack-render-provider\";\nimport PageInfoDialogs from \"./pageinfodialog\";\nimport DeleteDropZone from \"./deletedropzone\";\n\nimport \"../styles/index.css\";\n\n// Types for components in the layout\nexport interface ComponentInstance {\n  id: string;\n  type: string;\n  props: Record<string, any>;\n  position?: { x: number; y: number };\n}\n\n// Create context for internal state management\ninterface StackPageContextType {\n  selectedComponent: string | null;\n  setSelectedComponent: (component: string | null) => void;\n  selectedInstance: ComponentInstance | null;\n  setSelectedInstance: (instance: ComponentInstance | null) => void;\n  componentInstances: ComponentInstance[];\n  setComponentInstances: (instances: ComponentInstance[]) => void;\n  pageAttributes: {\n    margin: string;\n    padding: string;\n    background: string;\n    gap: string;\n  };\n  setPageAttributes: (attributes: any) => void;\n  addComponentToLayout: (\n    componentType: string,\n    position: { x: number; y: number }\n  ) => void;\n  updateComponentProps: (\n    componentId: string,\n    props: Record<string, any>\n  ) => void;\n  removeComponent: (componentId: string) => void;\n}\n\nconst StackPageContext = createContext<StackPageContextType | undefined>(\n  undefined\n);\n\nexport const useStackPage = () => {\n  const context = useContext(StackPageContext);\n  if (!context) {\n    throw new Error(\"useStackPage must be used within a StackPage\");\n  }\n  return context;\n};\n\nexport interface StackPageProps {\n  pageid: string;\n  pageMode: \"edit\" | \"preview\" | \"view\";\n  onLoadLayout: LoadLayoutFn; //(pageid: string) => Promise<PageProps>;\n  onSaveLayout?: SaveLayoutFn; //(pageid: string, pageProps: PageProps) => void;\n  componentMapProvider?: ComponentMapProvider;\n  componentPropsProvider?: ComponentPropsProvider;\n  gobackList: GoBackListFn; //() => void\n  children?: ReactNode;\n}\n\n// TooltipButton component\nfunction TooltipButton({\n  onClick,\n  icon,\n  tooltip,\n  className = \"\",\n}: {\n  onClick: () => void;\n  icon: React.ReactNode;\n  tooltip: string;\n  className?: string;\n}) {\n  return (\n    <div className=\"relative group\">\n      <button\n        onClick={onClick}\n        className={`p-2 rounded-lg transition ${className}`}\n      >\n        {icon}\n      </button>\n      <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 hidden group-hover:block bg-black text-white text-xs rounded py-1 px-2 whitespace-nowrap z-10\">\n        {tooltip}\n        <div className=\"absolute bottom-full left-1/2 w-2 h-2 bg-black transform -translate-x-1/2 rotate-45 -mb-1\"></div>\n      </div>\n    </div>\n  );\n}\n\n// StatusButton component\nfunction StatusButton({\n  onClick,\n  icon,\n  label,\n  className = \"\",\n  successMessage = \"Success\",\n  errorMessage = \"Error\",\n}: {\n  onClick: () => Promise<void>;\n  icon: React.ReactNode;\n  label: string;\n  className?: string;\n  successMessage?: string;\n  errorMessage?: string;\n}) {\n  const [status, setStatus] = useState<{\n    message: string;\n    type: \"success\" | \"error\";\n  } | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleClick = async () => {\n    setIsLoading(true);\n    setStatus(null);\n    try {\n      await onClick();\n      setStatus({ message: successMessage, type: \"success\" });\n    } catch (error) {\n      setStatus({ message: errorMessage, type: \"error\" });\n    } finally {\n      setIsLoading(false);\n      setTimeout(() => setStatus(null), 3000);\n    }\n  };\n\n  return (\n    <div className=\"relative z-30\">\n      <button\n        onClick={handleClick}\n        disabled={isLoading}\n        className={`p-2 rounded-lg transition flex items-center ${className} ${\n          isLoading ? \"opacity-70\" : \"\"\n        }`}\n      >\n        {isLoading ? (\n          <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n        ) : (\n          <>\n            {icon}\n            <span className=\"ml-1 hidden sm:inline\">{label}</span>\n          </>\n        )}\n      </button>\n      {status && (\n        <div\n          className={`absolute top-full left-0 mt-1 w-full text-center px-2 py-1 rounded-md text-xs font-medium animate-fadeIn ${\n            status.type === \"success\"\n              ? \"bg-blue-500 text-white\"\n              : \"bg-red-100 text-red-800\"\n          }`}\n        >\n          {status.message}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Mobile detection hook\nconst useMobile = () => {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n\n    return () => {\n      window.removeEventListener(\"resize\", checkMobile);\n    };\n  }, []);\n\n  return isMobile;\n};\n\nconst StackPage = ({\n  pageid,\n  pageMode,\n  onSaveLayout,\n  onLoadLayout,\n  componentMapProvider,\n  componentPropsProvider,\n  gobackList,\n  children,\n}: StackPageProps) => {\n  // Simplified mode handling\n  const [currentMode, setCurrentMode] = useState<\"edit\" | \"preview\" | \"view\">(pageMode);\n  const [showEditor, setShowEditor] = useState(true);\n  //const [isResizing, setIsResizing] = useState(false);\n  const [panelWidth /*setPanelWidth*/] = useState(400);\n  const [isEditingTitle, setIsEditingTitle] = useState(false);\n  const [activeTab, setActiveTab] = useState<\"components\" | \"properties\" | \"page\">(\"components\");\n\n  const [pageProps, setPageProps] = useState<PageProps>({...getDefaultPageProps(), id: pageid});\n  const [title, setTitle] = useState<string>()\n  const [pageTitle, setPageTitle] = useState<string>();\n\n  const [resetKey, setResetKey] = useState(0);\n  const [initialOptions, setInitialOptions] = useState<GridStackOptions>(gridOptions);\n  const stackActionsRef = useRef<StackActionsRef>(null);\n\n  const [dropEvent, setDropEvent] = useState<GridStackDropEvent>();\n  const [showGridInfo, setShowGridInfo] = useState(false);\n  const [showMenubar /*setShowMenubar*/] = useState(true);\n\n  // Internal state management\n  const [selectedComponent, setSelectedComponent] = useState<string | null>(null);\n  const [selectedInstance, setSelectedInstance] = useState<ComponentInstance | null>(null);\n  const [componentInstances, setComponentInstances] = useState<ComponentInstance[]>([]);\n  const [pageAttributes, setPageAttributes] = useState({\n    margin: \"0\",\n    padding: \"20px\",\n    background: \"#ffffff\",\n    gap: \"16px\",\n  });\n\n  //const resizeHandleRef = useRef<HTMLDivElement>(null);\n  const nextComponentId = useRef(1);\n  const isMobile = useMobile();\n\n  // Update currentMode when pageMode prop changes\n  useEffect(() => {\n    setCurrentMode(pageMode);\n  }, [pageMode]);\n\n  const handleLoadLayout = useCallback(async (pageid: string): Promise<any> => {\n    const pageProps = (await onLoadLayout(pageid)) || getDefaultPageProps();\n    setPageProps(pageProps);\n    setTitle(pageProps.title);\n    setPageTitle(pageProps.title);\n    return pageProps.grids;\n  }, [onLoadLayout]);\n\n  const handleReload = useCallback(async () => {\n    if (pageid) {      \n      const gridOptions: any = await handleLoadLayout(pageid);\n      setInitialOptions(gridOptions);\n      // Force remount\n      setResetKey((prev) => prev + 1);\n      clearSelectedData();\n      console.log(`reload layout: pageid ${pageid}, props id ${pageProps?.id}`);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pageid, handleLoadLayout]);\n\n  // Load layout when component mounts or pageid changes\n  useEffect(() => {\n    const loadLayout = async () => {\n      if (pageid) {\n        try {\n          await handleReload();\n        } catch (error) {\n          console.error(\"Failed to load layout:\", error);\n        }\n      }\n    };\n    loadLayout()\n  }, [pageid, handleReload]);\n\n  const handleGoBack = () => {\n    if (gobackList) {\n      gobackList();\n    }\n  };\n\n  // Default handlers\n  const handleSave = async () => {\n    if (onSaveLayout) {\n      const layout = stackActionsRef.current?.saveLayout();\n      if (layout) {\n        const savedPageProps: PageProps = {\n          ...(pageProps || getDefaultPageProps()) ,\n          grids: layout,\n          title: pageTitle as any\n        }\n        console.log(`Saving layout: pageid ${pageid}, props id ${savedPageProps.id}`);\n        await onSaveLayout(pageid, savedPageProps);\n      }\n    }\n  };\n\n  const clearSelectedData = () => {\n    setSelectedComponent(null);\n    setSelectedInstance(null);\n  };\n\n  const handleClear = () => {\n    if (\n      confirm(\"Are you sure you want to clear all data? This cannot be undone.\")\n    ) {\n      setInitialOptions(gridOptions);\n      // Force remount\n      setResetKey((prev) => prev + 1);\n\n      clearSelectedData();\n    }\n  };\n\n  const handleTitleEdit = () => {\n    setIsEditingTitle(true);\n  };\n\n  const handleTitleSave = () => {\n    setIsEditingTitle(false);    \n  };\n\n  const handleTitleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      handleTitleSave();\n    } else if (e.key === \"Escape\") {\n      setPageTitle(title);\n      setIsEditingTitle(false);\n    }\n  };\n\n  const handleDragStart = (e: React.DragEvent, componentType: string) => {\n    e.dataTransfer.setData(\"text/plain\", componentType);\n    e.dataTransfer.effectAllowed = \"copy\";\n  };\n\n  // const handleDragOver = (e: React.DragEvent) => {\n  //   //e.preventDefault();\n  //   e.dataTransfer.dropEffect = \"copy\"; // allow ghost image to keep following\n  // };\n\n  const handleDropEvent = (event: GridStackDropEvent) => {\n    setDropEvent(event);\n  };\n\n  // Internal function to handle adding components to layout\n  const addComponentToLayout = (\n    componentType: string,\n    position: { x: number; y: number }\n  ) => {\n    const componentId = `comp-${nextComponentId.current++}`;\n    const defaultProps = getComponentProps(componentPropsProvider)[\n      componentType\n    ]; // enhancedComponentPropsProvider(componentType);\n\n    const newInstance: ComponentInstance = {\n      id: componentId,\n      type: componentType,\n      props: { ...defaultProps },\n      position,\n    };\n\n    setComponentInstances((prev) => [...prev, newInstance]);\n    setSelectedInstance(newInstance);\n    setSelectedComponent(componentType);\n    setActiveTab(\"properties\"); // Switch to properties tab when component is added\n  };\n\n  // Update component properties\n  const updateComponentProps = (\n    componentId: string,\n    updatedProps: Record<string, any>\n  ) => {\n    setComponentInstances((prev) =>\n      prev.map((instance) =>\n        instance.id === componentId\n          ? { ...instance, props: { ...instance.props, ...updatedProps } }\n          : instance\n      )\n    );\n\n    // Update selected instance if it's the one being edited\n    if (selectedInstance && selectedInstance.id === componentId) {\n      setSelectedInstance((prev) =>\n        prev ? { ...prev, props: { ...prev.props, ...updatedProps } } : null\n      );\n    }\n  };\n\n  // Remove component\n  const removeComponent = (componentId: string) => {\n    setComponentInstances((prev) =>\n      prev.filter((instance) => instance.id !== componentId)\n    );\n    if (selectedInstance && selectedInstance.id === componentId) {\n      setSelectedInstance(null);\n      setSelectedComponent(null);\n    }\n  };\n\n  // Get components and props from enhanced providers\n  const componentMap = getComponentMap(componentMapProvider);\n\n  // Handle component property changes from properties tab\n  const handlePropertyChange = (property: string, value: any) => {\n    if (selectedInstance) {\n      updateComponentProps(selectedInstance.id, { [property]: value });\n    }\n  };\n\n  // Handle page attribute changes\n  const handlePageAttributeChange = (attribute: string, value: string) => {\n    const newAttributes = {\n      ...pageAttributes,\n      [attribute]: value,\n    };\n    setPageAttributes(newAttributes);\n  };\n\n  // Context value\n  const contextValue: StackPageContextType = {\n    selectedComponent,\n    setSelectedComponent,\n    selectedInstance,\n    setSelectedInstance,\n    componentInstances,\n    setComponentInstances,\n    pageAttributes,\n    setPageAttributes,\n    addComponentToLayout,\n    updateComponentProps,\n    removeComponent,\n  };\n\n  // Panel styles for different screen sizes\n  const panelStyle = isMobile\n    ? { width: \"100vw\", minWidth: \"100vw\", height: \"100vh\" }\n    : { width: `${panelWidth}px`, minWidth: \"300px\", height: \"100%\" };\n\n  // Main content style\n  const mainContentStyle = {\n    margin: pageAttributes.margin,\n    padding: pageAttributes.padding,\n    backgroundColor: pageAttributes.background,\n    gap: pageAttributes.gap,\n  };\n\n  const getPageInfo = () => {\n    const pageInfo: PageProps = JSON.parse(JSON.stringify(pageProps));\n    pageInfo.grids = stackActionsRef.current?.saveLayout();\n    return pageInfo;\n  };\n\n  useEffect(() => {\n    if (dropEvent && stackActionsRef.current) {\n      if (dropEvent.name !== \"SubGrid\") {\n        stackActionsRef.current.addWidget((_id) => ({\n          ...dropEvent,\n          sizeToContent: true, // Ensure the widget is sized to its content\n          content: JSON.stringify({\n            name: dropEvent.name,\n            props: getComponentProps(componentPropsProvider)[dropEvent.name],\n          }),\n        }));\n      } else {\n        stackActionsRef.current.addSubGrid((_id /*, withWidget: any*/) => ({\n          ...dropEvent,\n          ...subGridOptions,\n        }));\n      }\n    }\n  }, [dropEvent, componentPropsProvider]);\n\n  // Render Components Tab\n  // const renderComponentsTab = () => {\n  //   return (\n  //     <div className=\"p-4 space-y-4\">\n  //       <h3 className=\"text-lg font-medium mb-3\">Components</h3>\n  //       <p className=\"text-sm text-gray-600 mb-4\">\n  //         Drag components to the main area or click to select them\n  //       </p>\n  //       <div\n  //         key=\"SubGrid\"\n  //         gs-type=\"SubGrid\"\n  //         data-gs-type=\"SubGrid\"\n  //         className=\"grid-stack-item grid-stack-item-widget\"\n  //         draggable=\"true\"\n  //         onDragStart={(e) => handleDragStart(e, \"SubGrid\")}\n  //         onDragEnd={() => console.log(\"====SubGrid drag event end....\")}\n  //         onClick={() => {\n  //           setSelectedComponent(\"SubGrid\");\n  //           setSelectedInstance(null);\n  //         }}\n  //       >\n  //         {/* More prominent styling for SubGrid */}\n  //         <div className=\"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border-2 border-dashed border-blue-300 text-sm hover:from-blue-100 hover:to-indigo-100 cursor-pointer transition-all duration-200 hover:shadow-lg text-center group\">\n  //           <div className=\"font-semibold text-blue-700 mb-2 flex items-center justify-center\">\n  //             <svg\n  //               className=\"w-5 h-5 mr-2 group-hover:scale-110 transition-transform\"\n  //               fill=\"none\"\n  //               stroke=\"currentColor\"\n  //               viewBox=\"0 0 24 24\"\n  //             >\n  //               <path\n  //                 strokeLinecap=\"round\"\n  //                 strokeLinejoin=\"round\"\n  //                 strokeWidth={2}\n  //                 d=\"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z\"\n  //               />\n  //               <path\n  //                 strokeLinecap=\"round\"\n  //                 strokeLinejoin=\"round\"\n  //                 strokeWidth={2}\n  //                 d=\"M9 3v18M3 9h18\"\n  //               />\n  //             </svg>\n  //             SubGrid\n  //           </div>\n  //           <div className=\"text-xs text-blue-600 font-medium\">\n  //             Nested Grid Container\n  //           </div>\n  //           <div className=\"text-xs text-blue-500 mt-1\">\n  //             Drag to create nested layout\n  //           </div>\n  //         </div>\n  //       </div>\n  //       <div className=\"grid grid-cols-2 gap-3\">\n  //         {Object.entries(componentMap).map(([name /*Component*/]) => (\n  //           <div\n  //             key={name}\n  //             gs-type={name}\n  //             data-gs-type={name}\n  //             className=\"grid-stack-item grid-stack-item-widget\"\n  //             draggable=\"true\"\n  //             onDragStart={(e) => handleDragStart(e, name)}\n  //             onDragEnd={() => console.log(\"====drag event end....\")} // onDragOver={handleDragOver}\n  //             onClick={() => {\n  //               setSelectedComponent(name);\n  //               setSelectedInstance(null);\n  //             }}\n  //           >\n  //             {/* Wrap the content in a separate div for styling */}\n  //             <div className=\"p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm hover:bg-gray-100 cursor-pointer transition-all duration-200 hover:shadow-md text-center\">\n  //               <div className=\"font-medium text-gray-800 mb-2\">{name}</div>\n  //               <div className=\"text-xs text-gray-500\">Drag to main area</div>\n  //             </div>\n  //           </div>\n  //         ))}\n  //       </div>\n  //       {componentInstances.length > 0 && (\n  //         <div className=\"mt-6 pt-4 border-t\">\n  //           <h4 className=\"font-medium mb-3\">\n  //             Placed Components ({componentInstances.length})\n  //           </h4>\n  //           <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n  //             {componentInstances.map((instance) => (\n  //               <div\n  //                 key={instance.id}\n  //                 className={`flex justify-between items-center p-2 rounded text-sm ${\n  //                   selectedInstance?.id === instance.id\n  //                     ? \"bg-blue-100 border border-blue-300\"\n  //                     : \"bg-gray-100\"\n  //                 }`}\n  //                 onClick={() => {\n  //                   setSelectedInstance(instance);\n  //                   setSelectedComponent(instance.type);\n  //                   setActiveTab(\"properties\");\n  //                 }}\n  //               >\n  //                 <span className=\"truncate\">{instance.type}</span>\n  //                 <button\n  //                   onClick={(e) => {\n  //                     e.stopPropagation();\n  //                     removeComponent(instance.id);\n  //                   }}\n  //                   className=\"text-red-600 hover:text-red-800 text-xs px-2 py-1 rounded\"\n  //                 >\n  //                   Remove\n  //                 </button>\n  //               </div>\n  //             ))}\n  //           </div>\n  //         </div>\n  //       )}\n  //     </div>\n  //   );\n  // };\n\n// Then in the renderComponentsTab function, add the DeleteDropZone at the top:\nconst renderComponentsTab = () => {\n  return (\n    <div className=\"p-4 space-y-4\">\n      <h3 className=\"text-lg font-medium mb-3\">Components</h3>\n      <p className=\"text-sm text-gray-600 mb-4\">\n        Drag components to the main area or click to select them\n      </p>\n      \n      {/* Delete Drop Zone - Add this section */}\n      <div className=\"mb-4\">\n        <h4 className=\"text-sm font-medium text-gray-700 mb-2\">Delete Zone</h4>\n        <DeleteDropZone \n          onDropDelete={() => {\n            console.log(\"Component deleted via drop zone\");\n            // Clear selection after deletion\n            setSelectedComponent(null);\n            setSelectedInstance(null);\n          }} \n        />\n        <p className=\"text-xs text-gray-500 mt-2 text-center\">\n          Drag components here to delete them\n        </p>\n      </div>\n\n      {/* Rest of the existing components tab content */}\n      <div\n        key=\"SubGrid\"\n        gs-type=\"SubGrid\"\n        data-gs-type=\"SubGrid\"\n        className=\"grid-stack-item grid-stack-item-widget\"\n        draggable=\"true\"\n        onDragStart={(e) => handleDragStart(e, \"SubGrid\")}\n        onDragEnd={() => console.log(\"====SubGrid drag event end....\")}\n        onClick={() => {\n          setSelectedComponent(\"SubGrid\");\n          setSelectedInstance(null);\n        }}\n      >\n        {/* More prominent styling for SubGrid */}\n        <div className=\"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border-2 border-dashed border-blue-300 text-sm hover:from-blue-100 hover:to-indigo-100 cursor-pointer transition-all duration-200 hover:shadow-lg text-center group\">\n          <div className=\"font-semibold text-blue-700 mb-2 flex items-center justify-center\">\n            <svg\n              className=\"w-5 h-5 mr-2 group-hover:scale-110 transition-transform\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z\"\n              />\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9 3v18M3 9h18\"\n              />\n            </svg>\n            SubGrid\n          </div>\n          <div className=\"text-xs text-blue-600 font-medium\">\n            Nested Grid Container\n          </div>\n          <div className=\"text-xs text-blue-500 mt-1\">\n            Drag to create nested layout\n          </div>\n        </div>\n      </div>\n      \n      {/* Rest of the component grid */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        {Object.entries(componentMap).map(([name /*Component*/]) => (\n          <div\n            key={name}\n            gs-type={name}\n            data-gs-type={name}\n            className=\"grid-stack-item grid-stack-item-widget\"\n            draggable=\"true\"\n            onDragStart={(e) => handleDragStart(e, name)}\n            onDragEnd={() => console.log(\"====drag event end....\")}\n            onClick={() => {\n              setSelectedComponent(name);\n              setSelectedInstance(null);\n            }}\n          >\n            <div className=\"p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm hover:bg-gray-100 cursor-pointer transition-all duration-200 hover:shadow-md text-center\">\n              <div className=\"font-medium text-gray-800 mb-2\">{name}</div>\n              <div className=\"text-xs text-gray-500\">Drag to main area</div>\n            </div>\n          </div>\n        ))}\n      </div>\n      \n      {/* Rest of the existing component instances list */}\n      {componentInstances.length > 0 && (\n        <div className=\"mt-6 pt-4 border-t\">\n          <h4 className=\"font-medium mb-3\">\n            Placed Components ({componentInstances.length})\n          </h4>\n          <div className=\"space-y-2 max-h-40 overflow-y-auto\">\n            {componentInstances.map((instance) => (\n              <div\n                key={instance.id}\n                className={`flex justify-between items-center p-2 rounded text-sm ${\n                  selectedInstance?.id === instance.id\n                    ? \"bg-blue-100 border border-blue-300\"\n                    : \"bg-gray-100\"\n                }`}\n                onClick={() => {\n                  setSelectedInstance(instance);\n                  setSelectedComponent(instance.type);\n                  setActiveTab(\"properties\");\n                }}\n                draggable=\"true\"\n                onDragStart={(e) => {\n                  e.dataTransfer.setData(\"text/plain\", instance.id);\n                  e.dataTransfer.effectAllowed = \"move\";\n                }}\n              >\n                <span className=\"truncate\">{instance.type}</span>\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    removeComponent(instance.id);\n                  }}\n                  className=\"text-red-600 hover:text-red-800 text-xs px-2 py-1 rounded\"\n                >\n                  Remove\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\n  // Render Properties Tab\n  const renderPropertiesTab = () => {\n    if (!selectedInstance && !selectedComponent) {\n      return (\n        <div className=\"p-4 text-center text-gray-500\">\n          <div className=\"mb-2\">👈</div>\n          <p>\n            Select a component from the Components tab or click on a placed\n            component to edit its properties\n          </p>\n        </div>\n      );\n    }\n\n    const componentType = selectedInstance?.type || selectedComponent;\n    const currentProps =\n      selectedInstance?.props ||\n      getComponentProps(componentPropsProvider)[componentType || \"\"];\n\n    return (\n      <div className=\"p-4 space-y-4\">\n        <h3 className=\"text-lg font-medium mb-3\">\n          Properties - {componentType}\n          {selectedInstance && (\n            <span className=\"text-sm text-gray-500 ml-2\">\n              (ID: {selectedInstance.id})\n            </span>\n          )}\n        </h3>\n\n        <div className=\"space-y-4\">\n          {Object.entries(currentProps).map(([key, value]) => (\n            <div\n              key={key}\n              className=\"border-b border-gray-100 pb-3 last:border-b-0\"\n            >\n              <label className=\"block text-sm font-medium text-gray-700 mb-2 capitalize\">\n                {key.replace(/([A-Z])/g, \" $1\").trim()}\n              </label>\n              {typeof value === \"boolean\" ? (\n                <div className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={value as boolean}\n                    onChange={(e) =>\n                      handlePropertyChange(key, e.target.checked)\n                    }\n                    className=\"w-4 h-4 text-blue-600 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"ml-2 text-sm text-gray-600\">Enabled</span>\n                </div>\n              ) : typeof value === \"number\" ? (\n                <input\n                  type=\"number\"\n                  value={value as number}\n                  onChange={(e) =>\n                    handlePropertyChange(key, Number(e.target.value))\n                  }\n                  className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                />\n              ) : (\n                <input\n                  type=\"text\"\n                  value={value as string}\n                  onChange={(e) => handlePropertyChange(key, e.target.value)}\n                  className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                  placeholder={`Enter ${key}`}\n                />\n              )}\n            </div>\n          ))}\n        </div>\n\n        {selectedInstance && (\n          <div className=\"mt-6 pt-4 border-t\">\n            <button\n              onClick={() => removeComponent(selectedInstance.id)}\n              className=\"w-full py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors font-medium\"\n            >\n              Remove This Component\n            </button>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  // Render Page Tab\n  const renderPageTab = () => {\n    return (\n      <div className=\"p-4 space-y-4\">\n        <h3 className=\"text-lg font-medium mb-3\">Page Settings</h3>\n        <p className=\"text-sm text-gray-600 mb-4\">\n          Configure the overall page layout and appearance\n        </p>\n\n        <div className=\"space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Margin\n            </label>\n            <input\n              type=\"text\"\n              value={pageAttributes.margin}\n              onChange={(e) =>\n                handlePageAttributeChange(\"margin\", e.target.value)\n              }\n              className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"e.g., 0, 10px, 1rem\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Space around the entire page content\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Padding\n            </label>\n            <input\n              type=\"text\"\n              value={pageAttributes.padding}\n              onChange={(e) =>\n                handlePageAttributeChange(\"padding\", e.target.value)\n              }\n              className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"e.g., 20px, 2rem\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Space inside the page container\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Background Color\n            </label>\n            <div className=\"flex gap-3 items-center\">\n              <input\n                type=\"color\"\n                value={pageAttributes.background}\n                onChange={(e) =>\n                  handlePageAttributeChange(\"background\", e.target.value)\n                }\n                className=\"w-12 h-12 border border-gray-300 rounded cursor-pointer\"\n              />\n              <input\n                type=\"text\"\n                value={pageAttributes.background}\n                onChange={(e) =>\n                  handlePageAttributeChange(\"background\", e.target.value)\n                }\n                className=\"flex-1 p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"#ffffff, rgb(255,255,255), etc.\"\n              />\n            </div>\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Background color for the main content area\n            </p>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Component Gap\n            </label>\n            <input\n              type=\"text\"\n              value={pageAttributes.gap}\n              onChange={(e) => handlePageAttributeChange(\"gap\", e.target.value)}\n              className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"e.g., 16px, 1rem\"\n            />\n            <p className=\"text-xs text-gray-500 mt-1\">\n              Space between components in the main area\n            </p>\n          </div>\n        </div>\n\n        <div className=\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n          <h4 className=\"font-medium text-blue-800 mb-2\">\n            Current Page Settings\n          </h4>\n          <div className=\"text-sm text-blue-700 grid grid-cols-2 gap-2\">\n            <div>\n              Margin: <code>{pageAttributes.margin}</code>\n            </div>\n            <div>\n              Padding: <code>{pageAttributes.padding}</code>\n            </div>\n            <div>\n              Background: <code>{pageAttributes.background}</code>\n            </div>\n            <div>\n              Gap: <code>{pageAttributes.gap}</code>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <GridStackProvider key={resetKey} initialOptions={initialOptions}>\n      <StackPageContext.Provider value={contextValue}>\n        <div className=\"min-h-screen bg-white text-black flex flex-col\">\n\n          {/* Toolbar - Only show in edit mode */}\n          {currentMode === \"edit\" && (\n            <header className=\"p-4 bg-white shadow relative\">\n              <div className=\"flex flex-col sm:flex-row sm:items-center\">\n                {/* Title and Description - Left side */}\n                <div className=\"flex-1 mb-3 sm:mb-0 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    {isEditingTitle ? (\n                      <div className=\"flex items-center gap-2\">\n                        <input\n                          type=\"text\"\n                          value={pageTitle}\n                          onChange={(e) => setPageTitle(e.target.value)}\n                          onKeyDown={handleTitleKeyDown}\n                          onBlur={handleTitleSave}\n                          className=\"text-2xl font-bold border-b-2 border-blue-500 bg-transparent outline-none px-1\"\n                          autoFocus\n                        />\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-2 group\">\n                        <h1 className=\"text-2xl font-bold truncate\">\n                          {pageTitle}\n                        </h1>\n                        <button\n                          onClick={handleTitleEdit}\n                          className=\"p-1 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                        >\n                          <PencilIcon className=\"h-4 w-4\" />\n                        </button>\n                      </div>\n                    )}\n                  </div>\n\n                </div>\n\n                {/* Button Group - Right side */}\n                <div className=\"flex flex-wrap gap-1 justify-end\">\n                  {/* Back to List */}\n                  <TooltipButton\n                    onClick={handleGoBack}\n                    icon={<ArrowLeftIcon className=\"h-5 w-5\" />}\n                    tooltip=\"Back to list\"\n                    className=\"bg-gray-200 hover:bg-gray-300\"\n                  />\n\n                  {/* Preview */}\n                  <TooltipButton\n                    onClick={() => setCurrentMode(\"preview\")}\n                    icon={<EyeIcon className=\"h-5 w-5\" />}\n                    tooltip=\"Preview\"\n                    className=\"bg-purple-600 hover:bg-purple-700 text-white\"\n                  />\n\n                  {/* Save */}\n                  <StatusButton\n                    onClick={handleSave}\n                    icon={<CloudArrowDownIcon className=\"h-5 w-5\" />}\n                    label=\"Save\"\n                    className=\"bg-green-600 hover:bg-green-700 text-white\"\n                    successMessage=\"Saved successfully!\"\n                    errorMessage=\"Save failed\"\n                  />\n\n                  {/* Reload */}\n                  <StatusButton\n                    onClick={handleReload}\n                    icon={<ArrowPathIcon className=\"h-5 w-5\" />}\n                    label=\"Reload\"\n                    className=\"bg-green-600 hover:bg-green-700 text-white\"\n                    successMessage=\"Reloaded successfully\"\n                    errorMessage=\"Failed to reload\"\n                  />\n\n                  {/* Clear */}\n                  <TooltipButton\n                    onClick={handleClear}\n                    icon={<TrashIcon className=\"h-5 w-5\" />}\n                    tooltip=\"Clear all data\"\n                    className=\"bg-red-600 hover:bg-red-700 text-white\"\n                  />\n\n                  {/* Page Info */}\n                  <TooltipButton\n                    onClick={() => setShowGridInfo(true)}\n                    icon={<InformationCircleIcon className=\"h-5 w-5\" />}\n                    tooltip=\"Page Info & Settings\"\n                    className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\n                  />\n\n                  {/* Toggle Editor - Hide on mobile when panel is open */}\n                  {!isMobile && (\n                    <TooltipButton\n                      onClick={() => setShowEditor(!showEditor)}\n                      icon={\n                        showEditor ? (\n                          <ChevronRightIcon className=\"h-5 w-5\" />\n                        ) : (\n                          <ChevronLeftIcon className=\"h-5 w-5\" />\n                        )\n                      }\n                      tooltip={showEditor ? \"Hide Editor\" : \"Show Editor\"}\n                      className=\"bg-gray-200 hover:bg-gray-300\"\n                    />\n                  )}\n                </div>\n              </div>\n            </header>\n          )}\n\n          {/* Main Content Area */}\n          <div className=\"flex flex-1 overflow-hidden relative\">\n\n            {/* Main Content */}\n            <div\n              className={`flex-1 transition-all duration-200 ${\n                showEditor && currentMode === \"edit\"\n                  ? \"overflow-auto\"\n                  : \"overflow-hidden\"\n              }`}\n              style={mainContentStyle}\n            >\n              <div className=\"h-full\">\n                <div className=\"bg-white rounded-lg shadow h-full flex flex-col\">\n                  <div\n                    className={`flex-1 relative p-0 grid-stack-mode-${currentMode}`}\n                  >\n                    {/* Render existing component instances */}\n                    <StackActions ref={stackActionsRef} />\n                    <GridStackRenderProvider\n                      onGridStackDropEvent={handleDropEvent}\n                    >\n                      <GridStackRender\n                        componentMap={getComponentMap(componentMapProvider)}\n                        showMenubar={showMenubar}\n                      />\n                    </GridStackRenderProvider>\n\n                    {/* Custom children content */}\n                    {children}\n\n                  </div>\n                </div>\n              </div>\n            </div>            \n            {/* Main Content End*/}\n\n            {/* Editor Panel - Only show in edit mode when enabled */}\n            {currentMode === \"edit\" && showEditor && (\n              <>\n                {/* Mobile Overlay */}\n                {isMobile && (\n                  <div\n                    className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\n                    onClick={() => setShowEditor(false)}\n                  />\n                )}\n\n                {/* Panel */}\n                <div\n                  className={`flex flex-col bg-white shadow-lg border-l border-gray-200 ${\n                    isMobile\n                      ? \"fixed right-0 top-0 bottom-0 z-50 transform transition-transform duration-300\"\n                      : \"relative\"\n                  }`}\n                  style={panelStyle}\n                >\n                  {/* Close button for mobile */}\n                  {isMobile && (\n                    <div className=\"absolute top-4 right-4 z-10\">\n                      <button\n                        onClick={() => setShowEditor(false)}\n                        className=\"p-2 bg-gray-200 rounded-full hover:bg-gray-300 transition-colors\"\n                      >\n                        <ChevronRightIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  )}\n\n                  {/* Tab Header */}\n                  <div className=\"flex border-b border-gray-200 pt-4\">\n                    {([\"components\", \"properties\", \"page\"] as const).map(\n                      (tab) => (\n                        <button\n                          key={tab}\n                          className={`flex-1 py-3 px-4 text-sm font-medium capitalize transition-colors ${\n                            activeTab === tab\n                              ? \"text-blue-600 border-b-2 border-blue-600 bg-blue-50\"\n                              : \"text-gray-500 hover:text-gray-700 hover:bg-gray-50\"\n                          }`}\n                          onClick={() => setActiveTab(tab)}\n                        >\n                          {tab}\n                        </button>\n                      )\n                    )}\n                  </div>\n\n                  {/* Tab Content */}\n                  <div className=\"flex-1 overflow-y-auto pb-4\">\n                    {activeTab === \"components\" && renderComponentsTab()}\n                    {activeTab === \"properties\" && renderPropertiesTab()}\n                    {activeTab === \"page\" && renderPageTab()}\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n          {/* Main Content Area End*/}\n\n          {/* Mobile toggle button */}\n          {currentMode === \"edit\" && isMobile && !showEditor && (\n            <div className=\"fixed bottom-4 right-4 z-30\">\n              <button\n                onClick={() => setShowEditor(true)}\n                className=\"p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors\"\n              >\n                <ChevronLeftIcon className=\"h-6 w-6\" />\n              </button>\n            </div>\n          )}\n\n          {/* Floating Return Button - Show immediately in preview mode */}\n          {currentMode === \"preview\" && (\n            <div className=\"fixed inset-0 pointer-events-none z-50\">\n              <div className=\"absolute bottom-8 right-8 pointer-events-auto\">\n                <button\n                  onClick={() => setCurrentMode(\"edit\")}\n                  className=\"flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 group\"\n                  title=\"Return to Edit Mode\"\n                >\n                  <ArrowLeftCircleIcon className=\"h-6 w-6 group-hover:animate-bounce\" />\n                  <span className=\"text-sm font-medium\">Edit Mode</span>\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Floating Return Button - For view mode (external) */}\n          {currentMode === \"view\" && (\n            <div className=\"fixed inset-0 pointer-events-none z-50\">\n              <div className=\"absolute bottom-8 right-8 pointer-events-auto\">\n                <button\n                  onClick={gobackList}\n                  className=\"flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 group\"\n                  title=\"Back to List\"\n                >\n                  <ArrowLeftCircleIcon className=\"h-6 w-6 group-hover:animate-bounce\" />\n                  <span className=\"text-sm font-medium\">Back to List</span>\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* show page info */}\n          <PageInfoDialogs\n            isOpen={showGridInfo}\n            pageInfo={getPageInfo()}\n            resetOpenInfo={setShowGridInfo}\n          />\n        </div>\n      </StackPageContext.Provider>\n    </GridStackProvider>\n  );\n};\n\nexport default StackPage;\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","GridStackContext","createContext","useGridStackContext","context","useContext","GridStackProvider","children","initialOptions","gridStack","setGridStack","useState","rawWidgetMetaMap","setRawWidgetMetaMap","map","deepFindNodeWithContent","obj","_a","child","addWidget","useCallback","fn","newId","widget","prev","newMap","addSubGrid","subWidgetIdMap","subWidgetId","meta","id","removeWidget","saveOptions","_","jsx","GridStackRenderContext","useGridStackRenderContext","hasElementType","hasMap","hasSet","hasArrayBuffer","equal","length","i","keys","it","reactFastCompare","error","byteToHex","unsafeStringify","arr","offset","getRandomValues","rnds8","rng","randomUUID","native","v4","options","buf","rnds","originalResizeToContent","GridStack","el","content","GridStackRenderProvider","onGridStackDropEvent","widgetContainersRef","useRef","containerRef","optionsRef","renderCBFn","element","initGrid","grid","_event","_previousNode","newNode","type","dropEvent","uuidv4","useLayoutEffect","isEqual","useMemo","widgetId","GridStackWidgetContext","useGridStackWidgetContext","GridStackItemMenu","isMenuOpen","setIsMenuOpen","React","menuPosition","setMenuPosition","menuButtonRef","handleMenuClick","event","rect","handleClose","handleDelete","handleClickOutside","jsxs","GridStackAutoResizer","useEffect","container","resize","_b","observer","parseWidgetMeta","name","props","result","GridStackWidgetRenderer","WidgetComponent","widgetContainer","showMenubar","componentData","title","createPortal","GridStackRender","componentMap","_rawWidgetMetaMap","getWidgetContainer","Fragment","ArrowLeftCircleIcon","titleId","svgRef","ForwardRef","ArrowLeftIcon","ArrowPathIcon","ChevronLeftIcon","ChevronRightIcon","CloudArrowDownIcon","EyeIcon","InformationCircleIcon","PencilIcon","TrashIcon","Text","CELL_HEIGHT","BREAKPOINTS","gridOptions","subGridOptions","getDefaultPageProps","defaultComponentProps","defaultComponents","getComponentMap","customMap","getComponentProps","customObject","StackActions","forwardRef","ref","useImperativeHandle","PageInfo","pageInfo","layout","setLayout","PageInfoDialogs","isOpen","resetOpenInfo","copy","setCopy","handleCopy","handleBackdropClick","DeleteDropZone","onDropDelete","handleDrop","handleDragOver","handleDragEnter","handleDragLeave","StackPageContext","TooltipButton","onClick","icon","tooltip","className","StatusButton","label","successMessage","errorMessage","status","setStatus","isLoading","setIsLoading","handleClick","useMobile","isMobile","setIsMobile","checkMobile","StackPage","pageid","pageMode","onSaveLayout","onLoadLayout","componentMapProvider","componentPropsProvider","gobackList","currentMode","setCurrentMode","showEditor","setShowEditor","panelWidth","isEditingTitle","setIsEditingTitle","activeTab","setActiveTab","pageProps","setPageProps","setTitle","pageTitle","setPageTitle","resetKey","setResetKey","setInitialOptions","stackActionsRef","setDropEvent","showGridInfo","setShowGridInfo","selectedComponent","setSelectedComponent","selectedInstance","setSelectedInstance","componentInstances","setComponentInstances","pageAttributes","setPageAttributes","nextComponentId","handleLoadLayout","handleReload","clearSelectedData","handleGoBack","handleSave","savedPageProps","handleClear","handleTitleEdit","handleTitleSave","handleTitleKeyDown","handleDragStart","componentType","handleDropEvent","addComponentToLayout","position","componentId","defaultProps","newInstance","updateComponentProps","updatedProps","instance","removeComponent","handlePropertyChange","property","value","handlePageAttributeChange","attribute","newAttributes","contextValue","panelStyle","mainContentStyle","getPageInfo","_id","renderComponentsTab","renderPropertiesTab","currentProps","key","renderPageTab","tab"],"mappings":"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","x_google_ignoreList":[0,1,5,6,7,8,9,16,17,18,19,20,21,22,23,24,25]}