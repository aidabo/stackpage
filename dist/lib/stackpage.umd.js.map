{"version":3,"file":"stackpage.umd.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../src/lib/grid-stack-context.ts","../../src/lib/grid-stack-provider.tsx","../../src/lib/grid-stack-render-context.ts","../../node_modules/react-fast-compare/index.js","../../node_modules/uuid/dist/esm-browser/stringify.js","../../node_modules/uuid/dist/esm-browser/rng.js","../../node_modules/uuid/dist/esm-browser/native.js","../../node_modules/uuid/dist/esm-browser/v4.js","../../src/lib/grid-stack-render-provider.tsx","../../src/lib/grid-stack-widget-context.ts","../../src/lib/grid-stack-Item-menu.tsx","../../src/lib/grid-stack-autoresizer.tsx","../../src/lib/grid-stack-widget-render.tsx","../../src/lib/components/StackPageContext.ts","../../src/lib/grid-stack-render.tsx","../../node_modules/@heroicons/react/24/outline/esm/ArrowLeftCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowPathIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronLeftIcon.js","../../node_modules/@heroicons/react/24/outline/esm/ChevronRightIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CloudArrowDownIcon.js","../../node_modules/@heroicons/react/24/outline/esm/EyeIcon.js","../../node_modules/@heroicons/react/24/outline/esm/InformationCircleIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PencilIcon.js","../../node_modules/@heroicons/react/24/outline/esm/TrashIcon.js","../../src/lib/components/Text.tsx","../../src/lib/components/stackoptions.ts","../../src/lib/components/stackactions.tsx","../../src/lib/components/pageinfo.tsx","../../src/lib/components/pageinfodialog.tsx","../../src/lib/components/StackPageProvider.tsx","../../src/lib/components/StackPageWidgetProps.ts","../../src/lib/components/PropertyField.tsx","../../src/lib/components/PropertiesTab.tsx","../../src/lib/components/deletedropzone.tsx","../../src/lib/components/ComponentsTab.tsx","../../src/lib/components/PageTab.tsx","../../src/lib/components/StatusButton.tsx","../../src/lib/components/TooltipButton.tsx","../../src/lib/components/LocaleContext.tsx","../../src/lib/components/stackpage.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","import type { GridStack, GridStackOptions, GridStackWidget } from \"gridstack\";\nimport { createContext, useContext } from \"react\";\n\nexport const GridStackContext = createContext<{\n  initialOptions: GridStackOptions;\n  gridStack: GridStack | null;\n  addWidget: (fn: (id: string) => Omit<GridStackWidget, \"id\">) => void;\n  removeWidget: (id: string) => void;\n  addSubGrid: (\n    fn: (\n      id: string,\n      withWidget: (w: Omit<GridStackWidget, \"id\">) => GridStackWidget\n    ) => Omit<GridStackWidget, \"id\">\n  ) => void;\n  saveOptions: () => GridStackOptions | GridStackWidget[] | undefined;\n\n  _gridStack: {\n    value: GridStack | null;\n    set: React.Dispatch<React.SetStateAction<GridStack | null>>;\n  };\n  _rawWidgetMetaMap: {\n    value: Map<string, GridStackWidget>;\n    set: React.Dispatch<React.SetStateAction<Map<string, GridStackWidget>>>;\n  };\n} | null>(null);\n\nexport function useGridStackContext() {\n  const context = useContext(GridStackContext);\n  if (!context) {\n    throw new Error(\n      \"useGridStackContext must be used within a GridStackProvider\"\n    );\n  }\n  return context;\n}\n","import type { GridStack, GridStackOptions, GridStackWidget } from \"gridstack\";\nimport { type PropsWithChildren, useCallback, useState } from \"react\";\nimport { GridStackContext } from \"./grid-stack-context\";\n\nexport function GridStackProvider({\n  children,\n  initialOptions,\n}: PropsWithChildren<{ initialOptions: GridStackOptions }>) {\n  const [gridStack, setGridStack] = useState<GridStack | null>(null);\n  const [rawWidgetMetaMap, setRawWidgetMetaMap] = useState(() => {\n    const map = new Map<string, GridStackWidget>();\n    const deepFindNodeWithContent = (obj: GridStackWidget) => {\n      if (obj.id && obj.content) {\n        map.set(obj.id, obj);\n      }\n      if (obj.subGridOpts?.children) {\n        obj.subGridOpts.children.forEach((child: GridStackWidget) => {\n          deepFindNodeWithContent(child);\n        });\n      }\n    };\n    initialOptions.children?.forEach((child: GridStackWidget) => {\n      deepFindNodeWithContent(child);\n    });\n    return map;\n  });\n\n  const addWidget = useCallback(\n    (fn: (id: string) => Omit<GridStackWidget, \"id\">) => {\n      const newId = `widget-${Math.random().toString(36).substring(2, 15)}`;\n      const widget = fn(newId);\n      gridStack?.addWidget({ ...widget, id: newId });\n      setRawWidgetMetaMap((prev) => {\n        const newMap = new Map<string, GridStackWidget>(prev);\n        newMap.set(newId, widget);\n        return newMap;\n      });\n    },\n    [gridStack]\n  );\n\n  const addSubGrid = useCallback(\n    (\n      fn: (\n        id: string,\n        withWidget: (w: Omit<GridStackWidget, \"id\">) => GridStackWidget\n      ) => Omit<GridStackWidget, \"id\">\n    ) => {\n      const newId = `sub-grid-${Math.random().toString(36).substring(2, 15)}`;\n      const subWidgetIdMap = new Map<string, GridStackWidget>();\n\n      const widget = fn(newId, (w) => {\n        const subWidgetId = `widget-${Math.random()\n          .toString(36)\n          .substring(2, 15)}`;\n        subWidgetIdMap.set(subWidgetId, w);\n        return { ...w, id: subWidgetId };\n      });\n\n      gridStack?.addWidget({ ...widget, id: newId });\n\n      setRawWidgetMetaMap((prev) => {\n        const newMap = new Map<string, GridStackWidget>(prev);\n        subWidgetIdMap.forEach((meta, id) => {\n          newMap.set(id, meta);\n        });\n        return newMap;\n      });\n    },\n    [gridStack]\n  );\n\n  const removeWidget = useCallback(\n    (id: string) => {\n      gridStack?.removeWidget(id);\n      setRawWidgetMetaMap((prev) => {\n        const newMap = new Map<string, GridStackWidget>(prev);\n        newMap.delete(id);\n        return newMap;\n      });\n    },\n    [gridStack]\n  );\n\n  const saveOptions = useCallback(() => {\n    return gridStack?.save(true, true, (_, widget) => widget);\n  }, [gridStack]);\n\n  return (\n    <GridStackContext.Provider\n      value={{\n        initialOptions,\n        gridStack,\n\n        addWidget,\n        removeWidget,\n        addSubGrid,\n        saveOptions,\n\n        _gridStack: {\n          value: gridStack,\n          set: setGridStack,\n        },\n        _rawWidgetMetaMap: {\n          value: rawWidgetMetaMap,\n          set: setRawWidgetMetaMap,\n        },\n      }}\n    >\n      {children}\n    </GridStackContext.Provider>\n  );\n}","import { createContext, useContext } from \"react\";\n\nexport const GridStackRenderContext = createContext<{\n  getWidgetContainer: (widgetId: string) => HTMLElement | null;\n} | null>(null);\n\nexport function useGridStackRenderContext() {\n  const context = useContext(GridStackRenderContext);\n  if (!context) {\n    throw new Error(\n      \"useGridStackRenderContext must be used within a GridStackProvider\"\n    );\n  }\n  return context;\n}\n","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.3\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    // START: Modifications:\n    // Apply guards for `Object.create(null)` handling. See:\n    // - https://github.com/FormidableLabs/react-fast-compare/issues/64\n    // - https://github.com/epoberezkin/fast-deep-equal/issues/49\n    if (a.valueOf !== Object.prototype.valueOf && typeof a.valueOf === 'function' && typeof b.valueOf === 'function') return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString && typeof a.toString === 'function' && typeof b.toString === 'function') return a.toString() === b.toString();\n    // END: Modifications\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import {\n  PropsWithChildren,\n  useCallback,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n} from \"react\";\nimport { useGridStackContext } from \"./grid-stack-context\";\nimport {\n  GridItemHTMLElement,\n  GridStack,\n  GridStackOptions,\n  GridStackWidget,\n} from \"gridstack\";\nimport { GridStackRenderContext } from \"./grid-stack-render-context\";\nimport isEqual from \"react-fast-compare\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nexport interface GridStackDropEvent {\n  name: string;\n  id: string;\n  x: number;\n  y: number;\n  w: number;\n  h: number;\n  gridId?: string; // Add gridId to identify which grid received the drop\n}\n\nexport type GridStackDropEventCallback = (event: GridStackDropEvent) => void;\n\n// Override the default resizeToContent method to ensure content.firstChildElement is null error, \n// because resizeToContent called by GridStack before React DOM mounted and rendered\nconst originalResizeToContent = GridStack.prototype.resizeToContent;\nGridStack.prototype.resizeToContent = function(el: GridItemHTMLElement) {\n  const content = el.querySelector('.grid-stack-item-content');\n  const first = content?.firstElementChild;\n  if (!first) {\n    // Silently skip\n    return;\n  }\n  return originalResizeToContent.call(this, el);\n};\n\nexport function GridStackRenderProvider({\n  children,\n  onGridStackDropEvent,\n}: PropsWithChildren<{ onGridStackDropEvent?: GridStackDropEventCallback }>) {\n  const {\n    _gridStack: { value: gridStack, set: setGridStack },\n    initialOptions,\n  } = useGridStackContext();\n\n  const widgetContainersRef = useRef<Map<string, HTMLElement>>(new Map());\n  const containerRef = useRef<HTMLDivElement>(null);\n  const optionsRef = useRef<GridStackOptions>(initialOptions);\n\n  const renderCBFn = useCallback(\n    (element: HTMLElement, widget: GridStackWidget) => {\n      if (widget.id) {\n        widgetContainersRef.current.set(widget.id, element);\n      }\n    },\n    []\n  );\n\n  const initGrid = useCallback(() => {\n    if (containerRef.current) {\n      GridStack.renderCB = renderCBFn;\n\n      const grid = GridStack.init(optionsRef.current, containerRef.current);\n\n      // Enable drag-and-drop from external sources\n      GridStack.setupDragIn(\".grid-stack-item-widget\", {\n         appendTo: \"body\", \n         helper: \"clone\",\n         scroll: false,\n      }\n    );\n            \n      // grid.on('added removed change', function(e:any, items: any) {\n      //   let str = '';\n      //   items.forEach(function(item:any) { str += ' (x,y)=' + item.x + ',' + item.y; });\n      //   console.log(e.type + ' ' + items.length + ' items:' + str );\n      // });\n\n      // grid.on('drag', function(event: any, el) {\n      //   //const n = el.gridstackNode;\n      //   const x = el.getAttribute('gs-x'); // verify node (easiest) and attr are the same\n      //   const y = el.getAttribute('gs-y');\n      //   // console.log((g || el.gridstackNode.grid.opts.id) + ' drag ' + (n.content || '') + ' pos: (' + n.x + ',' + n.y + ') = (' + x + ',' + y + ')');\n      //   console.log(\"drag...\", x, y, event.target)\n      // })\n\n      // grid.on('dragstop', function(event: any, el) {\n      //   //let n = el.gridstackNode;\n      //   const x = el.getAttribute('gs-x'); // verify node (easiest) and attr are the same\n      //   const y = el.getAttribute('gs-y');\n      //   //console.log((g || el.gridstackNode.grid.opts.id) + ' dragstop ' + (n.content || '') + ' pos: (' + n.x + ',' + n.y + ') = (' + x + ',' + y + ')');\n      //   console.log(\"dragstop\", x, y, event.target);\n      // });\n\n      grid.on(\"dropped\", function (_event, _previousNode, newNode) {    \n        console.log(\"dropped....\", newNode);\n        \n        if (newNode) {\n          // Remove the node that gridstack added\n          const el: any = newNode.el;\n          const type: string = el.dataset.gsType;\n          if (type && onGridStackDropEvent) {\n            const dropEvent: GridStackDropEvent = {\n              name: type,\n              id: uuidv4(),\n              x: newNode.x || 0,\n              y: newNode.y || 0,\n              w: type === \"SubGrid\" ? 12 : 4, // SubGrid takes full width\n              h: type === \"SubGrid\" ? 6 : 4,  // SubGrid is taller              \n            };\n            onGridStackDropEvent(dropEvent);\n            //remove el.gridstackNode from gridstack\n            //add by callback\n            grid.removeWidget(el, true);\n          }\n          //if drag from SubGrid, that's OK,           \n        }\n      });\n\n      return grid;\n    }\n\n    return null;\n  }, [renderCBFn, onGridStackDropEvent]);\n\n\n  useLayoutEffect(() => {\n    if (!isEqual(initialOptions, optionsRef.current) && gridStack) {\n      try {\n        gridStack.removeAll(false);\n        gridStack.destroy(false);\n        widgetContainersRef.current.clear();\n        optionsRef.current = initialOptions;\n        setGridStack(initGrid());\n      } catch (e) {\n        console.error(\"Error reinitializing gridstack\", e);\n      }\n    }\n  }, [initialOptions, gridStack, initGrid, setGridStack]);\n\n  useLayoutEffect(() => {\n    if (!gridStack) {\n      try {\n        setGridStack(initGrid());\n      } catch (e) {\n        console.error(\"Error initializing gridstack\", e);\n      }\n    }\n  }, [gridStack, initGrid, setGridStack]);\n\n  return (\n    <GridStackRenderContext.Provider\n      value={useMemo(\n        () => ({\n          getWidgetContainer: (widgetId: string) => {\n            return widgetContainersRef.current.get(widgetId) || null;\n          },\n        }),\n        // ! gridStack is required to reinitialize the grid when the options change\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        [gridStack]\n      )}\n    >\n      <div ref={containerRef}>{gridStack ? children : null}</div>\n    </GridStackRenderContext.Provider>\n  );\n}\n","import { createContext, useContext } from \"react\";\n\n// TODO: support full widget metadata\nexport const GridStackWidgetContext = createContext<{\n  widget: {\n    id: string;\n  };\n} | null>(null);\n\nexport function useGridStackWidgetContext() {\n  const context = useContext(GridStackWidgetContext);\n  if (!context) {\n    throw new Error(\n      \"useGridStackWidgetContext must be used within a GridStackWidgetProvider\"\n    );\n  }\n  return context;\n}\n","import * as React from 'react';\nimport { useGridStackContext } from \"./grid-stack-context\";\n\nexport interface GridStackItemMenuProps {\n  widgetId: string;\n  title?: string;\n}\n\nexport function GridStackItemMenu({ \n  widgetId,\n}: GridStackItemMenuProps) {    \n  const { removeWidget } = useGridStackContext();\n  const [isMenuOpen, setIsMenuOpen] = React.useState(false);\n  const [menuPosition, setMenuPosition] = React.useState({ top: 0, left: 0 });\n  const menuButtonRef = React.useRef<HTMLButtonElement>(null);\n  \n  const handleMenuClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    event.stopPropagation();\n    if (menuButtonRef.current) {\n      const rect = menuButtonRef.current.getBoundingClientRect();\n      setMenuPosition({\n        top: rect.bottom + window.scrollY,\n        left: rect.left + window.scrollX,\n      });\n    }\n    setIsMenuOpen(!isMenuOpen);\n  };\n\n  const handleClose = () => {\n    setIsMenuOpen(false);\n  };\n\n  const handleDelete = () => {\n    // remove component from the context\n    removeWidget(widgetId);\n    // remove the widget from the gridstack\n    const el = document.querySelector(`[gs-id=\"${widgetId}\"]`) as HTMLElement | null;\n    if (el && (el as any).gridstackNode?.grid) {\n      (el as any).gridstackNode.grid.removeWidget(el, true, true); // delete from correct GridStack\n    }\n    handleClose();\n  };\n\n  // Close menu when clicking outside\n  React.useEffect(() => {\n    const handleClickOutside = (_event: MouseEvent) => {\n      if (isMenuOpen) {\n        setIsMenuOpen(false);\n      }\n    };\n\n    document.addEventListener('click', handleClickOutside);\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, [isMenuOpen]);\n\n  return (\n    <div className=\"flex justify-end size-4\">\n      <button className=\"p-1 hover:bg-gray-200 rounded transition-colors\">\n        <svg \n          className=\"w-4 h-4 text-gray-600\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={2} \n            d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" \n          />\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={2} \n            d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" \n          />\n        </svg>\n      </button>\n      \n      <button\n        ref={menuButtonRef}\n        onClick={handleMenuClick}\n        className=\"p-1 hover:bg-gray-200 rounded transition-colors\"\n        aria-haspopup=\"true\"\n        aria-expanded={isMenuOpen}\n      >\n        <svg \n          className=\"w-4 h-4 text-gray-600\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={2} \n            d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" \n          />\n        </svg>\n      </button>\n\n      {/* Dropdown Menu */}\n      {isMenuOpen && (\n        <div \n          className=\"fixed z-50 mt-1 w-32 bg-white rounded-md shadow-lg border border-gray-200 py-1\"\n          style={{\n            top: `${menuPosition.top}px`,\n            left: `${menuPosition.left}px`,\n            transform: 'translateX(-100%)'\n          }}\n          onClick={(e) => e.stopPropagation()}\n        >\n          <button\n            onClick={handleDelete}\n            className=\"flex items-center w-full px-3 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors\"\n          >\n            <svg \n              className=\"w-4 h-4 mr-2\" \n              fill=\"none\" \n              stroke=\"currentColor\" \n              viewBox=\"0 0 24 24\"\n            >\n              <path \n                strokeLinecap=\"round\" \n                strokeLinejoin=\"round\" \n                strokeWidth={2} \n                d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" \n              />\n            </svg>\n            Delete\n          </button>\n        </div>\n      )}\n    </div>\n  );\n}","import { useEffect, useRef } from \"react\";\n\nexport function GridStackAutoResizer({ widgetId, children }: {\n  widgetId: string;\n  children: React.ReactNode;\n}) {\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (!container) return;\n\n    const el = container.closest(\".grid-stack-item\");\n    if (!el || !(el as any).gridstackNode?.grid) return;\n\n    const resize = () => {\n      const content = el.querySelector(\".grid-stack-item-content\");\n      if (content?.firstElementChild && (el as any).gridstackNode && (el as any).gridstackNode.grid) {\n        (el as any).gridstackNode?.grid?.resizeToContent(el);\n      }\n    };\n\n    const observer = new ResizeObserver(() => resize());\n    observer.observe(container);\n    resize(); // Initial call\n\n    return () => observer.disconnect();\n  }, [widgetId]);\n\n  return (\n    <div\n      ref={containerRef}\n      className=\"gridstack-measured-container\"\n      style={{ width: \"100%\" }}\n    >\n      {children}\n    </div>\n  );\n}\n","import { createPortal } from \"react-dom\";\nimport { GridStackWidget } from \"gridstack\";\nimport { ComponentType } from \"react\";\nimport { GridStackWidgetContext } from \"./grid-stack-widget-context\";\nimport { GridStackItemMenu } from \"./grid-stack-Item-menu\";\nimport { GridStackAutoResizer } from \"./grid-stack-autoresizer\";\n\n// Parse widget metadata into usable component info\nfunction parseWidgetMeta(meta: GridStackWidget): {\n  name: string;\n  props: object;\n  error: unknown;\n} {\n  let error = null;\n  let name = \"\";\n  let props = {};\n\n  try {\n    if (meta.content) {\n      const result = JSON.parse(meta.content) as {\n        name: string;\n        props: object;\n      };\n      name = result.name;\n      props = result.props;\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  return { name, props, error };\n}\n\ninterface GridStackWidgetRendererProps {\n  id: string;\n  meta: GridStackWidget;\n  WidgetComponent: ComponentType<any>;\n  widgetContainer: HTMLElement;\n  showMenubar?: boolean;\n  isSelected?: boolean;\n  onWidgetSelect?: (widgetData: {\n    id: string;\n    name: string;\n    props: object;\n  }) => void;\n  componentProps?: object; // Add this prop\n}\n\nexport function GridStackWidgetRenderer({\n  id,\n  meta,\n  WidgetComponent,\n  widgetContainer,\n  showMenubar,\n  isSelected = false,\n  onWidgetSelect,\n  componentProps, // Add this\n}: GridStackWidgetRendererProps) {\n  const componentData = parseWidgetMeta(meta);\n  \n  // Use the passed componentProps if available, otherwise use parsed props\n  const props = componentProps || componentData.props;\n  const title = (props as any)?.title || `Widget ${id.slice(0, 4)}`;\n\n  const handleWidgetClick = (_e: React.MouseEvent) => {\n    if (onWidgetSelect) {\n      onWidgetSelect({\n        id,\n        name: componentData.name,\n        props: props, // Use the resolved props\n      });\n    }\n  };\n\n  const content = (\n    <GridStackAutoResizer widgetId={id}>\n      <div className={`h-full w-full ${isSelected ? 'outline outline-2 outline-blue-400 outline-offset-1' : ''}`} \n        onClick={handleWidgetClick}>\n        {showMenubar && (\n          <div className=\"widget-header flex items-center justify-between bg-gray-100 border-b px-2 min-h-[36px]\">\n            <div className=\"font-medium truncate text-sm px-1\">{title}</div>\n            <GridStackItemMenu widgetId={id} />\n          </div>\n        )}\n        <div className=\"widget-body flex-1 min-h-[40px] cursor-pointer\">\n          <WidgetComponent {...props} /> {/* Use the resolved props */}\n        </div>\n      </div>\n    </GridStackAutoResizer>\n  );\n\n  return (\n    <GridStackWidgetContext.Provider value={{ widget: { id } }}>\n      {createPortal(content, widgetContainer)}\n    </GridStackWidgetContext.Provider>\n  );\n}","import { createContext, useContext } from \"react\";\n\n// Types for components in the layout\nexport interface ComponentInstance {\n  id: string;\n  type: string;\n  props: Record<string, any>;\n}\n\n// Context interface\nexport interface StackPageContextType {\n  selectedComponent: string | null;\n  setSelectedComponent: (component: string | null) => void;\n  selectedInstance: ComponentInstance | null;\n  setSelectedInstance: (instance: ComponentInstance | null) => void;\n  pageAttributes: {\n    margin: string;\n    padding: string;\n    background: string;\n    showMenubar: boolean;\n    image?: string; // Add this\n    tag?: string; // Add this\n    status?: string; // Add this\n  };\n  setPageAttributes: (attributes: any) => void;\n  activeTab: \"components\" | \"properties\" | \"page\";\n  setActiveTab: (tab: \"components\" | \"properties\" | \"page\") => void;\n  widgetProps: Map<string, object>;\n  updateWidgetProps: (widgetId: string, props: object) => void;\n}\n\n// Create context\nexport const StackPageContext = createContext<StackPageContextType | undefined>(\n  undefined\n);\n\n// Hook for using the context\nexport const useStackPage = () => {\n  const context = useContext(StackPageContext);\n  if (!context) {\n    throw new Error(\"useStackPage must be used within a StackPageProvider\");\n  }\n  return context;\n};\n\n// Hook specifically for widget props\nexport const useStackPageWidgetProps = () => {\n  const context = useContext(StackPageContext);\n  if (!context) {\n    throw new Error(\n      \"useStackPageWidgetProps must be used within a StackPageProvider\"\n    );\n  }\n  return {\n    widgetProps: context.widgetProps,\n    updateWidgetProps: context.updateWidgetProps,\n  };\n};\n","import { useGridStackContext } from \"./grid-stack-context\";\nimport { useGridStackRenderContext } from \"./grid-stack-render-context\";\nimport { GridStackWidget } from \"gridstack\";\nimport { ComponentType } from \"react\";\nimport { GridStackWidgetRenderer } from \"./grid-stack-widget-render\";\nimport { useStackPageWidgetProps, useStackPage } from \"@/lib/components/StackPageContext\"; // Add this import\n\n// Type for component registration\nexport type ComponentMap = Record<string, ComponentType<any>>;\n\n// Widget content format\nexport interface ComponentDataType<T = object> {\n  name: string;\n  props: T;\n}\n\nfunction parseWidgetMeta(\n  meta: GridStackWidget\n): ComponentDataType & { error: unknown } {\n  let error = null;\n  let name = \"\";\n  let props = {};\n\n  try {\n    if (meta.content) {\n      const result = JSON.parse(meta.content) as {\n        name: string;\n        props: object;\n      };\n      name = result.name;\n      props = result.props;\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  return { name, props, error };\n}\n\ninterface GridStackRenderProps {\n  componentMap: ComponentMap;\n  showMenubar?: boolean;\n  selectedWidgetId?: string | null;\n  onWidgetSelect?: (widgetData: {\n    id: string;\n    name: string;\n    props: object;\n  }) => void;\n}\n\nexport function GridStackRender({\n  componentMap,\n  showMenubar = false,\n  onWidgetSelect,\n}: GridStackRenderProps) {\n  const { _rawWidgetMetaMap } = useGridStackContext();\n  const { getWidgetContainer } = useGridStackRenderContext();\n  const { widgetProps } = useStackPageWidgetProps(); // Get widget props from StackPageContext\n  const { selectedInstance } = useStackPage();\n\n  return (\n    <>\n      {/* Drop zone indicator when empty */}\n      {Array.from(_rawWidgetMetaMap.value.entries()).length === 0 && (\n        <div className=\"flex flex-col items-center justify-center h-64 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 p-8 text-center\">\n          <div className=\"text-4xl mb-4\">ðŸ“¦</div>\n          <h3 className=\"text-lg font-medium mb-2\">Drag Components Here</h3>\n          <p className=\"text-sm\">\n            Drag components from the Components tab in the right panel to start\n            building your layout\n          </p>\n        </div>\n      )}\n\n      {Array.from(_rawWidgetMetaMap.value.entries()).map(([id, meta]) => {\n        const { name, props: metaProps } = parseWidgetMeta(meta);\n        const WidgetComponent = componentMap[name];\n        const widgetContainer = getWidgetContainer(id);\n\n        // Use updated props from StackPageContext if available, otherwise use meta props\n        const props = widgetProps.get(id) || metaProps;\n\n        if (!WidgetComponent || !widgetContainer) return null;\n\n        return (\n          <GridStackWidgetRenderer\n            key={id}\n            id={id}\n            meta={meta}\n            WidgetComponent={WidgetComponent}\n            widgetContainer={widgetContainer}\n            showMenubar={showMenubar}\n            isSelected={id === (selectedInstance as any)?.id}\n            onWidgetSelect={onWidgetSelect}\n            componentProps={props} // Pass the resolved props\n          />\n        );\n      })}\n    </>\n  );\n}","import * as React from \"react\";\nfunction ArrowLeftCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 9-3 3m0 0 3 3m-3-3h7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowLeftCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ArrowPathIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowPathIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronLeftIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 19.5 8.25 12l7.5-7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronLeftIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ChevronRightIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m8.25 4.5 7.5 7.5-7.5 7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ChevronRightIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CloudArrowDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CloudArrowDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction EyeIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(EyeIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction InformationCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(InformationCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PencilIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PencilIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;","function Text({ content }: { content: string; }) {\n  return (\n    <div className=\"flex items-start p-2 bg-white border rounded shadow-sm text-left\">\n      <div>\n        <p className=\"text-sm\">{content}</p>\n      </div>\n    </div>\n  );\n}\n\nexport default Text;\n","import { GridStackOptions, GridStackWidget } from \"gridstack\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { ComponentMap } from \"..\";\nimport Text from \"./Text\";\n\nconst CELL_HEIGHT = \"1rem\"; //16px;\n\nconst BREAKPOINTS = [\n  //{ c: 1, w: 300 },   // 1 column on screens < 300px\n  { c: 1, w: 500 }, // 2 columns between 300px - 500px\n  { c: 3, w: 800 }, // 4 columns between 500px - 800px\n  { c: 6, w: 1024 }, // 6 columns between 800px - 1024px\n  //{ c: 8, w: 1200 },  // 8 columns on screens > 1200px\n];\n\n/**\n * Default grid options for the main grid.\n * This includes settings for accepting widgets, removable elements, and layout configurations.\n */\nexport const gridOptions: GridStackOptions = {\n  acceptWidgets: true,\n  removable: \"#trash\",\n  sizeToContent: true,\n  resizable: { handles: \"se\" },\n  minRow: 10,\n  columnOpts: {\n    breakpointForWindow: true,\n    breakpoints: BREAKPOINTS,\n    layout: \"moveScale\",\n    columnMax: 12,\n  },\n  margin: 5,\n  cellHeight: CELL_HEIGHT,\n\n  subGridOpts: {\n    acceptWidgets: true,\n    removable: \"#trash\",\n    resizable: { handles: \"se\" },\n    sizeToContent: true,\n    columnOpts: {\n      breakpoints: BREAKPOINTS,\n      layout: \"moveScale\",\n    },\n    margin: 5,\n    minRow: 1,\n    cellHeight: CELL_HEIGHT,\n  },\n  children: [],\n};\n\n/**\n * Default sub-grid options for nested grids.\n * This includes settings for accepting widgets, removable elements, and layout configurations.\n */\nexport const subGridOptions: GridStackOptions = {\n  acceptWidgets: true,\n  removable: \"#trash\",\n  resizable: { handles: \"se\" },\n  sizeToContent: true,\n  subGridOpts: {\n    acceptWidgets: true,\n    removable: \"#trash\",\n    resizable: { handles: \"se\" },\n    sizeToContent: true,\n    columnOpts: {\n      breakpoints: BREAKPOINTS,\n      layout: \"moveScale\",\n    },\n    margin: 5,\n    minRow: 6,\n    cellHeight: CELL_HEIGHT,\n    children: [],\n  },\n  children: [],\n};\n\n/**\n * Page properties interface\n */\nexport interface PageProps {\n  id: string;\n  title: string;\n  description?: string;\n  image?: string;\n  tag?: string;\n  status?: string;\n  pageAttributes?: any;\n  grids: GridStackOptions | GridStackWidget[] | undefined;\n}\n\n/**\n * component properties interface\n */\nexport interface ComponentProps {\n  [key: string]: any;\n}\n\n/**\n * getDefaultPageProps - Returns the default properties for a page.\n * @returns Default page properties with a unique ID and default grid options.\n */\nexport const getDefaultPageProps = (): PageProps => {\n  return {\n    id: `${uuidv4()}`,\n    title: \"untitled page\",\n    grids: gridOptions,\n  };\n};\n\n/**\n * default component properties\n * This is a default set of properties for components.\n */\nconst defaultComponentProps: ComponentProps = {\n  Text: {\n    content: `Any content other than text are what we call cards. Cards can be accessed by clicking the âž• button or typing / at the beginning of a paragraph.\nEven better, continue typing to find the card you're looking for, hit enter, and avoid dragging your mouse altogether.\nSome cards have a handy little shortcut, to keep you on track and in flow. Use --- to divide your paragraphs with a line, or \\`\\`\\` to add a code block. You can also drag and drop images directly into the editor to bypass the menu. \nAny content other than text are what we call cards. Cards can be accessed by clicking the âž• button or typing / at the beginning of a paragraph.`,\n    title: \"This is text card\",\n  },\n};\n\nconst defaultComponents: ComponentMap = {\n  Text,\n};\n\n/**\n * ComponentMapProvider - A function that returns a map of components.\n * This will allow for dynamic customization of components.\n */\nexport type ComponentMapProvider = () => ComponentMap;\n\n/**\n * ComponentPropsProvider - A function that returns a record of component properties.\n * This will allow for dynamic customization of component props.\n */\nexport type ComponentPropsProvider = () => Record<string, any>;\n\n/**\n * getComponentMap - Returns the default component map or merges with custom components if provided.\n * @param fn a function that returns a custom component map\n * @returns\n */\nexport const getComponentMap = (fn?: ComponentMapProvider): ComponentMap => {\n  if (fn) {\n    const customMap = fn();\n    // Merge with custom keys overriding defaults\n    return { ...defaultComponents, ...customMap };\n  }\n  return defaultComponents;\n};\n\n/**\n * getComponentProps - Returns the default component properties or merges with custom properties if provided.\n * @param fn - A function that returns custom component properties\n * @returns\n */\nexport const getComponentProps = (\n  fn?: ComponentPropsProvider\n): ComponentProps => {\n  if (fn) {\n    const customObject = fn();\n    // Merge with custom keys overriding defaults\n    return { ...defaultComponentProps, ...customObject };\n  }\n  return defaultComponentProps;\n};\n\n/**\n * Save page layout, if pageid is not the same as pageProps.id, it will as created a new page\n * @param pageid - The ID of the page to save\n * @param pageProps - The properties of the page to save\n */\nexport type SaveLayoutFn = (\n  pageid: string,\n  pageProps: PageProps\n) => Promise<void>;\n\n\n/**\n * Load page layout function\n */\nexport type LoadLayoutFn = (pageid: string) => Promise<PageProps>;\n\n/**\n * Provide goback page navigation\n */\nexport type GoBackListFn = () => void;\n\n/**\n * Image, video, audio, file uploaded callback for server upload\n */\nexport type FileUploadFn = (file: File) => Promise<string>;\n\n/**\n * Get tags for system to set for page\n */\nexport type GetTagsFn = () => Promise<Array<string>>;\n\n/**\n * If component field name  include \"/api\", use this callback to get data\n */\nexport type ApiCallFn = (endpoint: string, value?: any) => Promise<any>;\n\n/**\n * if component field name include \"action\", call this function\n */\nexport type CustomActionFn = (action: string, data: any) => Promise<any>;\n\n/**\n * New callback for dynamic select options\n */\nexport type GetSelectOptionsFn = (propertyName: string, componentType: string) => Promise<string[]>;\n  \n","import { forwardRef, useImperativeHandle } from \"react\";\nimport { useGridStackContext } from \"..\";\nimport { GridStackOptions, GridStackWidget } from \"gridstack\";\n\nexport type StackActionsRef = {\n  saveLayout: () => GridStackOptions | GridStackWidget[] | undefined;\n  addWidget: (fn: (id: string) => Omit<GridStackWidget, \"id\">) => void;\n  addSubGrid: (\n    fn: (\n      id: string,\n      withWidget: (w: Omit<GridStackWidget, \"id\">) => GridStackWidget\n    ) => Omit<GridStackWidget, \"id\">\n  ) => void;\n  rawWidgetMetaMap: {\n    value: Map<string, GridStackWidget>;\n    set: React.Dispatch<React.SetStateAction<Map<string, GridStackWidget>>>;\n  };\n};\n\nconst StackActions = forwardRef<StackActionsRef>((_, ref) => {\n  const { addWidget, addSubGrid, saveOptions, _rawWidgetMetaMap } = useGridStackContext();\n\n  useImperativeHandle(ref, () => ({\n    saveLayout: () => {\n      return saveOptions();\n    },\n    addWidget,\n    addSubGrid,\n    rawWidgetMetaMap: _rawWidgetMetaMap\n  }));\n\n  return null;\n});\n\nexport default StackActions;","import { useEffect, useState } from \"react\";\nimport { GridStackOptions, GridStackWidget } from \"gridstack\";\n\nexport function PageInfo(\n  {pageInfo}: \n  {pageInfo: any\n}) {\n  const [layout, setLayout] = useState<\n    GridStackOptions | GridStackWidget[] | undefined\n  >(undefined);\n\n  useEffect(() => {\n    if (pageInfo) {\n      setLayout(pageInfo);\n    }\n  }, [pageInfo]);\n\n  return (\n    <div>\n      <div\n        style={{\n          display: \"grid\",\n          gap: \"1rem\",\n          gridTemplateColumns: \"repeat(2, 1fr)\",\n        }}\n      >\n        <div id=\"pageinfo\">\n          <pre\n            style={{\n              backgroundColor: \"#f3f4f6\",\n              padding: \"1rem\",\n              borderRadius: \"0.25rem\",\n              overflow: \"auto\",\n            }}\n          >\n            {JSON.stringify(layout || {}, null, 2)}\n          </pre>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as React from \"react\";\nimport { PageInfo } from \"./pageinfo\";\n\ninterface PageInfoDialogsProps {\n  isOpen: boolean;\n  pageInfo: any;\n  resetOpenInfo: (open: boolean) => void;\n}\n\nexport default function PageInfoDialogs({\n  isOpen,\n  pageInfo,\n  resetOpenInfo,\n}: PageInfoDialogsProps) {\n  const [copy, setCopy] = React.useState(false);\n\n  React.useEffect(() => {\n    if (isOpen) {\n      // Component is controlled by parent via isOpen prop\n    }\n  }, [isOpen, pageInfo]);\n\n  const handleClose = () => {\n    resetOpenInfo(false);\n  };\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(\n      document.getElementById(\"pageinfo\")?.innerText || \"\"\n    );\n    setCopy(true);\n    setTimeout(() => {\n      setCopy(false);\n    }, 3000);\n  };\n\n  // Close on backdrop click\n  const handleBackdropClick = (e: React.MouseEvent<HTMLDivElement>) => {\n    if (e.target === e.currentTarget) {\n      handleClose();\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\"\n      onClick={handleBackdropClick}\n    >\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-4 border-b flex-shrink-0\">\n          <h2 className=\"text-lg font-semibold truncate mr-2\">Page Information</h2>\n          <div className=\"flex items-center space-x-1 flex-shrink-0\">\n            <button\n              onClick={handleCopy}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors flex items-center relative\"\n              aria-label=\"Copy page info\"\n            >\n              <svg \n                className=\"w-5 h-5\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" \n                />\n              </svg>\n              {copy && (\n                <span className=\"absolute -top-8 -right-2 bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap\">\n                  copied\n                </span>\n              )}\n            </button>\n            <button\n              onClick={handleClose}\n              className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\"\n              aria-label=\"Close\"\n            >\n              <svg \n                className=\"w-5 h-5\" \n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\"\n              >\n                <path \n                  strokeLinecap=\"round\" \n                  strokeLinejoin=\"round\" \n                  strokeWidth={2} \n                  d=\"M6 18L18 6M6 6l12 12\" \n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Content - Scrollable area */}\n        <div className=\"p-4 overflow-y-auto flex-1\">\n          <PageInfo pageInfo={pageInfo} />\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex justify-end p-4 border-t flex-shrink-0\">\n          <button\n            onClick={handleClose}\n            className=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 transition-colors w-full sm:w-auto\"\n            autoFocus\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useState, useCallback, ReactNode } from \"react\";\nimport {\n  StackPageContext,\n  StackPageContextType,\n  ComponentInstance,\n} from \"./StackPageContext\";\n\n// Props for the provider\ninterface StackPageProviderProps {\n  children: ReactNode;\n}\n\n// Provider component\nexport function StackPageProvider({ children }: StackPageProviderProps) {\n  const [selectedComponent, setSelectedComponent] = useState<string | null>(\n    null\n  );\n  const [selectedInstance, setSelectedInstance] =\n    useState<ComponentInstance | null>(null);\n  const [pageAttributes, setPageAttributes] = useState({\n    margin: \"5\",\n    padding: \"10px\",\n    background: \"#ffffff\",\n    showMenubar: true,\n    image: \"\", // Add this\n    tag: \"\", // Add this\n    status: \"draft\", // Add this\n  });\n  const [activeTab, setActiveTab] = useState<\n    \"components\" | \"properties\" | \"page\"\n  >(\"components\");\n  const [widgetProps, setWidgetProps] = useState<Map<string, object>>(\n    new Map()\n  );\n\n  const updateWidgetProps = useCallback((widgetId: string, props: object) => {\n    setWidgetProps((prev) => {\n      const newMap = new Map(prev);\n      newMap.set(widgetId, props);\n      return newMap;\n    });\n  }, []);\n\n  const contextValue: StackPageContextType = {\n    selectedComponent,\n    setSelectedComponent,\n    selectedInstance,\n    setSelectedInstance,\n    pageAttributes,\n    setPageAttributes,\n    activeTab,\n    setActiveTab,\n    widgetProps,\n    updateWidgetProps,\n  };\n\n  return (\n    <StackPageContext.Provider value={contextValue}>\n      {children}\n    </StackPageContext.Provider>\n  );\n}\n","// StackPageWidgetProps.ts\nimport { useStackPageWidgetProps } from './StackPageContext';\n\n// Hook to get and update widget props for a specific widget\nexport const useWidgetProps = (widgetId?: string) => {\n  const { widgetProps, updateWidgetProps } = useStackPageWidgetProps();\n  \n  const getProps = () => {\n    if (!widgetId) return undefined;\n    return widgetProps.get(widgetId);\n  };\n\n  const setProps = (props: object) => {\n    if (!widgetId) return;\n    updateWidgetProps(widgetId, props);\n  };\n\n  const updateProps = (updates: Partial<object>) => {\n    if (!widgetId) return;\n    const currentProps = widgetProps.get(widgetId) || {};\n    updateWidgetProps(widgetId, { ...currentProps, ...updates });\n  };\n\n  return {\n    getProps,\n    setProps,\n    updateProps,\n    hasProps: widgetId ? widgetProps.has(widgetId) : false,\n  };\n};","/* eslint-disable no-case-declarations */\n// PropertyField.tsx\nimport React, { useState, useRef } from \"react\";\n\ninterface PropertyFieldProps {\n  name: string;\n  value: any;\n  onChange: (value: any) => void;\n  onFileUpload?: (file: File) => Promise<string>;\n}\n\nexport const PropertyField = ({\n  name,\n  value,\n  onChange,\n  onFileUpload,\n}: PropertyFieldProps) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const [urlInput, setUrlInput] = useState(value || \"\");\n\n  // Helper function to detect if a string is a valid date\n  const isValidDate = (dateString: any): boolean => {\n    if (typeof dateString !== \"string\") return false;\n    const date = new Date(dateString);\n    return !isNaN(date.getTime());\n  };\n\n  // Helper function to check if string is a valid HTTP URL\n  const isValidHttpUrl = (string: string): boolean => {\n    try {\n      const url = new URL(string);\n      return url.protocol === \"http:\" || url.protocol === \"https:\";\n    } catch (_) {\n      return false;\n    }\n  };\n\n  // Helper function to detect field type\n  const detectFieldType = (): string => {\n    const lowerName = name.toLowerCase();\n\n    // Check for special field names\n    if (\n      [\n        \"src\",\n        \"source\",\n        \"file\",\n        \"image\",\n        \"url\",\n        \"avatar\",\n        \"logo\",\n        \"icon\",\n        \"video\",\n        \"audio\",\n        \"media\",\n      ].includes(lowerName)\n    ) {\n      return \"file\";\n    }\n\n    // Check for date/time fields\n    const dateLikeNames = [\n      \"date\",\n      \"time\",\n      \"datetime\",\n      \"created\",\n      \"updated\",\n      \"start\",\n      \"end\",\n      \"timestamp\",\n      \"published\",\n      \"due\",\n      \"at\",\n    ];\n    const isDateLikeName = dateLikeNames.some((dateName) =>\n      lowerName.includes(dateName)\n    );\n\n    if (isDateLikeName && isValidDate(value)) {\n      if (\n        lowerName.includes(\"time\") ||\n        lowerName.includes(\"datetime\") ||\n        lowerName === \"timestamp\"\n      ) {\n        return \"datetime\";\n      }\n      return \"date\";\n    }\n\n    // Check value type\n    if (typeof value === \"number\") return \"number\";\n    if (typeof value === \"boolean\") return \"boolean\";\n    if (Array.isArray(value)) return \"array\";\n    if (typeof value === \"object\" && value !== null) return \"json\";\n\n    if (typeof value === \"string\") {\n      // Check for select pattern\n      const selectPattern = /^\\[([^\\]]+)\\]$/;\n      const match = value.match(selectPattern);\n      if (match) {\n        const optionsString = match[1];\n        if (optionsString.includes(\",\") || optionsString.includes(\"|\")) {\n          return \"select\";\n        }\n      }\n\n      // Check for long text or multi-line\n      if (value.length > 40 || value.includes(\"\\n\")) return \"textarea\";\n\n      // Check if it's a color value\n      if (\n        lowerName.includes(\"color\") ||\n        value.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)\n      ) {\n        return \"color\";\n      }\n\n      return \"text\";\n    }\n\n    return \"text\";\n  };\n\n  // Helper function to parse select options\n  const parseSelectOptions = (selectString: string): string[] => {\n    const match = selectString.match(/^\\[([^\\]]+)\\]$/);\n    if (!match) return [];\n\n    const optionsString = match[1];\n\n    if (optionsString.includes(\",\")) {\n      return optionsString.split(\",\").map((opt) => opt.trim());\n    } else if (optionsString.includes(\"|\")) {\n      return optionsString.split(\"|\").map((opt) => opt.trim());\n    }\n\n    return [optionsString.trim()];\n  };\n\n  // Format date for input (ISO format)\n  const formatDateForInput = (\n    dateValue: any,\n    type: \"date\" | \"datetime\"\n  ): string => {\n    if (!dateValue) return \"\";\n\n    try {\n      const date = new Date(dateValue);\n      if (isNaN(date.getTime())) return \"\";\n\n      if (type === \"date\") {\n        return date.toISOString().split(\"T\")[0]; // YYYY-MM-DD\n      } else {\n        return date.toISOString().slice(0, 16); // YYYY-MM-DDTHH:mm\n      }\n    } catch {\n      return \"\";\n    }\n  };\n\n  // Parse date from input (ISO format)\n  const parseDateFromInput = (\n    inputValue: string,\n    type: \"date\" | \"datetime\"\n  ): string => {\n    if (!inputValue) return \"\";\n\n    try {\n      if (type === \"date\") {\n        const date = new Date(inputValue + \"T00:00:00\");\n        return date.toISOString().split(\"T\")[0];\n      } else {\n        const date = new Date(inputValue);\n        return date.toISOString();\n      }\n    } catch {\n      return inputValue;\n    }\n  };\n\n  // Format date for display as yyyy/MM/dd\n  const formatDateForDisplay = (\n    dateValue: any,\n    type: \"date\" | \"datetime\"\n  ): string => {\n    if (!dateValue) return \"\";\n\n    try {\n      const date = new Date(dateValue);\n      if (isNaN(date.getTime())) return \"\";\n\n      const year = date.getFullYear();\n      const month = String(date.getMonth() + 1).padStart(2, \"0\");\n      const day = String(date.getDate()).padStart(2, \"0\");\n\n      if (type === \"date\") {\n        return `${year}/${month}/${day}`;\n      } else {\n        const hours = String(date.getHours()).padStart(2, \"0\");\n        const minutes = String(date.getMinutes()).padStart(2, \"0\");\n        return `${year}/${month}/${day} ${hours}:${minutes}`;\n      }\n    } catch {\n      return \"\";\n    }\n  };\n\n  // Get file type based on extension or value\n  const getFileType = (\n    fileValue: string\n  ): \"image\" | \"video\" | \"audio\" | \"document\" | \"other\" => {\n    if (!fileValue) return \"other\";\n\n    // Check for data URLs\n    if (fileValue.startsWith(\"data:\")) {\n      if (fileValue.startsWith(\"data:image\")) return \"image\";\n      if (fileValue.startsWith(\"data:video\")) return \"video\";\n      if (fileValue.startsWith(\"data:audio\")) return \"audio\";\n      return \"other\";\n    }\n\n    // Check file extension\n    const extension = fileValue.split(\".\").pop()?.toLowerCase() || \"\";\n\n    const imageExtensions = [\n      \"jpg\",\n      \"jpeg\",\n      \"png\",\n      \"gif\",\n      \"webp\",\n      \"bmp\",\n      \"svg\",\n      \"ico\",\n      \"tiff\",\n    ];\n    const videoExtensions = [\n      \"mp4\",\n      \"mov\",\n      \"avi\",\n      \"webm\",\n      \"mkv\",\n      \"flv\",\n      \"wmv\",\n      \"m4v\",\n      \"3gp\",\n    ];\n    const audioExtensions = [\"mp3\", \"wav\", \"ogg\", \"aac\", \"flac\", \"m4a\", \"wma\"];\n    const documentExtensions = [\n      \"pdf\",\n      \"doc\",\n      \"docx\",\n      \"txt\",\n      \"rtf\",\n      \"odt\",\n      \"xls\",\n      \"xlsx\",\n      \"ppt\",\n      \"pptx\",\n    ];\n\n    if (imageExtensions.includes(extension)) return \"image\";\n    if (videoExtensions.includes(extension)) return \"video\";\n    if (audioExtensions.includes(extension)) return \"audio\";\n    if (documentExtensions.includes(extension)) return \"document\";\n\n    return \"other\";\n  };\n\n  // Get accept attribute for file input based on field name\n  const getFileAccept = (): string => {\n    const lowerName = name.toLowerCase();\n    const fileType = getFileType(value);\n\n    if (\n      lowerName.includes(\"image\") ||\n      lowerName.includes(\"avatar\") ||\n      lowerName.includes(\"logo\") ||\n      lowerName.includes(\"icon\")\n    ) {\n      return \"image/*\";\n    }\n    if (lowerName.includes(\"video\")) {\n      return \"video/*\";\n    }\n    if (lowerName.includes(\"audio\") || lowerName.includes(\"sound\")) {\n      return \"audio/*\";\n    }\n    if (\n      lowerName.includes(\"document\") ||\n      lowerName.includes(\"pdf\") ||\n      lowerName.includes(\"doc\")\n    ) {\n      return \".pdf,.doc,.docx,.txt,.rtf,.odt,.xls,.xlsx,.ppt,.pptx\";\n    }\n    // Priority 2: by current file value\n    switch (fileType) {\n      case \"image\":\n        return \"image/*\";\n      case \"video\":\n        return \"video/*\";\n      case \"audio\":\n        return \"audio/*\";\n      case \"document\":\n        return \".pdf,.doc,.docx,.txt,.rtf,.odt,.xls,.xlsx,.ppt,.pptx\";\n      default:\n        return \"*/*\";\n    }\n  };\n\n  const fieldType = detectFieldType();\n\n  const handleFileUpload = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      setIsUploading(true);\n      try {\n        if (onFileUpload) {\n          const fileUrl = await onFileUpload(file);\n          onChange(fileUrl);\n          setUrlInput(fileUrl);\n        } else {\n          // Fallback to data URL for local preview\n          const reader = new FileReader();\n          reader.onload = (e) => {\n            const dataUrl = e.target?.result as string;\n            onChange(dataUrl);\n            setUrlInput(dataUrl);\n          };\n          reader.readAsDataURL(file);\n        }\n      } catch (error) {\n        console.error(\"File upload failed:\", error);\n        alert(\"Failed to upload file\");\n      } finally {\n        setIsUploading(false);\n      }\n    }\n  };\n\n  const handleUrlInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const newUrl = e.target.value;\n    setUrlInput(newUrl);\n  };\n\n  const handleUrlSubmit = () => {\n    if (urlInput && !isValidHttpUrl(urlInput)) {\n      alert(\"Please enter a valid HTTP or HTTPS URL\");\n      return;\n    }\n    onChange(urlInput);\n  };\n\n  const handleFileRemove = () => {\n    if (typeof value === \"string\" && value.startsWith(\"data:\")) {\n      URL.revokeObjectURL(value);\n    }\n    onChange(\"\");\n    setUrlInput(\"\");\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  // Render file preview based on file type\n  const renderFilePreview = () => {\n    const fileType = getFileType(value);\n\n    switch (fileType) {\n      case \"image\":\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <img\n              src={value}\n              alt=\"Preview\"\n              className=\"w-16 h-16 object-cover rounded border\"\n            />\n            <div className=\"text-sm text-gray-600\">\n              <div>Image File</div>\n              <div className=\"text-xs text-gray-400 truncate max-w-32\">\n                {value.split(\"/\").pop() || \"Image\"}\n              </div>\n            </div>\n          </div>\n        );\n      case \"video\":\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center\">\n              <span className=\"text-2xl\">ðŸŽ¬</span>\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              <div>Video File</div>\n              <div className=\"text-xs text-gray-400 truncate max-w-32\">\n                {value.split(\"/\").pop() || \"Video\"}\n              </div>\n            </div>\n          </div>\n        );\n      case \"audio\":\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center\">\n              <span className=\"text-2xl\">ðŸŽµ</span>\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              <div>Audio File</div>\n              <div className=\"text-xs text-gray-400 truncate max-w-32\">\n                {value.split(\"/\").pop() || \"Audio\"}\n              </div>\n            </div>\n          </div>\n        );\n      case \"document\":\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"w-16 h-16 bg-gray-200 rounded border flex items-center justify-center\">\n              <span className=\"text-2xl\">ðŸ“„</span>\n            </div>\n            <div className=\"text-sm text-gray-600\">\n              <div>Document</div>\n              <div className=\"text-xs text-gray-400 truncate max-w-32\">\n                {value.split(\"/\").pop() || \"Document\"}\n              </div>\n            </div>\n          </div>\n        );\n      default:\n        return (\n          <div className=\"flex items-center space-x-2\">\n            <div className=\"text-sm text-gray-500 truncate max-w-32\">\n              {value.split(\"/\").pop() || \"File\"}\n            </div>\n          </div>\n        );\n    }\n  };\n\n  // Update urlInput when value changes\n  React.useEffect(() => {\n    setUrlInput(value || \"\");\n  }, [value]);\n\n  // Render different field types\n  switch (fieldType) {\n    case \"number\":\n      return (\n        <input\n          type=\"number\"\n          value={value}\n          onChange={(e) => onChange(Number(e.target.value))}\n          className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          step={name.toLowerCase().includes(\"integer\") ? \"1\" : \"any\"}\n        />\n      );\n\n    case \"boolean\":\n      return (\n        <div className=\"flex items-center\">\n          <input\n            type=\"checkbox\"\n            checked={value}\n            onChange={(e) => onChange(e.target.checked)}\n            className=\"w-4 h-4 text-blue-600 rounded focus:ring-blue-500\"\n          />\n          <span className=\"ml-2 text-sm text-gray-600\">\n            {value ? \"Enabled\" : \"Disabled\"}\n          </span>\n        </div>\n      );\n\n    case \"textarea\":\n      return (\n        <textarea\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          rows={Math.min(10, Math.max(3, value.split(\"\\n\").length + 1))}\n          className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-vertical\"\n          placeholder={`Enter ${name}...`}\n        />\n      );\n\n    case \"color\":\n      return (\n        <div className=\"flex items-center space-x-2\">\n          <input\n            type=\"color\"\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            className=\"w-12 h-12 border border-gray-300 rounded cursor-pointer\"\n          />\n          <input\n            type=\"text\"\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            className=\"flex-1 p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            placeholder=\"#000000\"\n          />\n        </div>\n      );\n\n    case \"date\":\n      return (\n        <div className=\"space-y-2\">\n          {value && (\n            <div className=\"text-sms text-gray-700\">\n              {formatDateForDisplay(value, \"date\")}\n            </div>\n          )}\n          <input\n            type=\"date\"\n            value={formatDateForInput(value, \"date\")}\n            onChange={(e) =>\n              onChange(parseDateFromInput(e.target.value, \"date\"))\n            }\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          />\n        </div>\n      );\n\n    case \"datetime\":\n      return (\n        <div className=\"space-y-2\">\n          <input\n            type=\"datetime-local\"\n            value={formatDateForInput(value, \"datetime\")}\n            onChange={(e) =>\n              onChange(parseDateFromInput(e.target.value, \"datetime\"))\n            }\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          />\n          {value && (\n            <div className=\"text-xs text-gray-500\">\n              Display: {formatDateForDisplay(value, \"datetime\")}\n            </div>\n          )}\n        </div>\n      );\n\n    case \"file\":\n      return (\n        <div className=\"space-y-3\">\n          {/* File Preview and Remove Button */}\n          {value && (\n            <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded border\">\n              {renderFilePreview()}\n              <button\n                type=\"button\"\n                onClick={handleFileRemove}\n                className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\n              >\n                Remove\n              </button>\n            </div>\n          )}\n\n          {/* File Upload Input */}\n          <div className=\"space-y-2\">\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept={getFileAccept()}\n              onChange={handleFileUpload}\n              disabled={isUploading}\n              className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            />\n            {isUploading && (\n              <div className=\"text-sm text-blue-600\">Uploading...</div>\n            )}\n            <div className=\"text-xs text-gray-500\">\n              Allowed:{\" \"}\n              {getFileAccept() === \"*/*\" ? \"All files\" : getFileAccept()}\n            </div>\n          </div>\n\n          {/* URL Input */}\n          <div className=\"space-y-2\">\n            <div className=\"text-sm text-gray-600 text-center\">OR</div>\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"text\"\n                value={urlInput}\n                onChange={handleUrlInputChange}\n                className=\"flex-1 p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                placeholder=\"https://example.com/file.jpg\"\n                onKeyPress={(e) => {\n                  if (e.key === \"Enter\") {\n                    handleUrlSubmit();\n                  }\n                }}\n              />\n              <button\n                type=\"button\"\n                onClick={handleUrlSubmit}\n                disabled={!urlInput}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded text-sm font-medium hover:bg-blue-700 disabled:bg-gray-400\"\n              >\n                Apply URL\n              </button>\n            </div>\n            <div className=\"text-xs text-gray-500\">\n              Enter a direct URL to an existing file (http or https)\n            </div>\n          </div>\n        </div>\n      );\n\n    case \"select\":\n      const options = parseSelectOptions(value);\n      const currentValue = options.length > 0 ? value : \"\";\n\n      return (\n        <div className=\"space-y-2\">\n          <select\n            value={currentValue}\n            onChange={(e) => onChange(e.target.value)}\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            <option value=\"\">Select an option</option>\n            {options.map((option) => (\n              <option key={option} value={`[${option}]`}>\n                {option}\n              </option>\n            ))}\n          </select>\n          <div className=\"text-xs text-gray-500\">\n            {options.length} options available\n          </div>\n        </div>\n      );\n\n    case \"json\":\n      return (\n        <div className=\"space-y-2\">\n          <textarea\n            value={\n              typeof value === \"string\" ? value : JSON.stringify(value, null, 2)\n            }\n            onChange={(e) => {\n              try {\n                if (\n                  e.target.value.trim().startsWith(\"{\") ||\n                  e.target.value.trim().startsWith(\"[\")\n                ) {\n                  const parsedValue = JSON.parse(e.target.value);\n                  onChange(parsedValue);\n                } else {\n                  onChange(e.target.value);\n                }\n              } catch (error) {\n                onChange(e.target.value);\n              }\n            }}\n            rows={8}\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 font-mono text-xs\"\n            placeholder=\"Enter JSON data...\"\n          />\n          <div className=\"text-xs text-gray-500 flex justify-between\">\n            <span>\n              {typeof value === \"object\" ? \"JSON Object\" : \"Text/JSON\"}\n            </span>\n            <button\n              type=\"button\"\n              onClick={() => {\n                try {\n                  const formatted = JSON.stringify(JSON.parse(value), null, 2);\n                  onChange(formatted);\n                } catch {\n                  // Ignore if not valid JSON\n                }\n              }}\n              className=\"text-blue-600 hover:text-blue-800\"\n            >\n              Format\n            </button>\n          </div>\n        </div>\n      );\n\n    default:\n      return (\n        <input\n          type=\"text\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          placeholder={`Enter ${name}...`}\n        />\n      );\n  }\n};\n","// PropertiesTab.tsx\nimport { useStackPage } from \"./StackPageContext\";\nimport { useWidgetProps } from \"./StackPageWidgetProps\";\nimport { PropertyField } from \"./PropertyField\";\n\ninterface PropertiesTabProps {\n  onFileUpload?: (file: File) => Promise<string>;\n  onApiCall?: (endpoint: string, data?: any) => Promise<any>;\n  onCustomAction?: (action: string, data: any) => Promise<any>;\n  onGetSelectOptions?: (propertyName: string, componentType: string) => Promise<string[]>;\n}\n\nexport const PropertiesTab = ({ \n  onFileUpload, \n  onApiCall, \n  onCustomAction,\n  onGetSelectOptions\n}: PropertiesTabProps) => {\n  const { selectedInstance, selectedComponent, setSelectedInstance, setSelectedComponent } = useStackPage();\n  const { updateProps, getProps } = useWidgetProps(selectedInstance?.id);\n\n  if (!selectedInstance && !selectedComponent) {\n    return (\n      <div className=\"p-4 text-center text-gray-500\">\n        <div className=\"mb-2\">ðŸ‘ˆ</div>\n        <p>\n          Select a component from the Components tab or click on a placed\n          component to edit its properties\n        </p>\n      </div>\n    );\n  }\n\n  const componentType = selectedInstance?.type || selectedComponent;\n  \n  // Get current props - merge updated props from context with instance props\n  const currentInstanceProps = selectedInstance?.props || {};\n  const updatedPropsFromContext = getProps() || {};\n  const currentProps = { ...currentInstanceProps, ...updatedPropsFromContext };\n\n  const handlePropertyChange = (property: string, value: any) => {\n    if (selectedInstance) {\n      // Create updated props by merging the change with existing props\n      const updatedProps = { ...currentProps, [property]: value };\n      \n      // Update the selected instance in context\n      const updatedInstance = { \n        ...selectedInstance, \n        props: updatedProps \n      };\n      setSelectedInstance(updatedInstance);\n\n      // Update the widget props in StackPageContext\n      updateProps(updatedProps);\n    }\n  };\n\n  // Handle dynamic select options\n  const handleGetSelectOptions = async (property: string) => {\n    if (onGetSelectOptions) {\n      try {\n        const options = await onGetSelectOptions(property, componentType || '');\n        // Format options as select string: [option1, option2, option3]\n        const selectString = `[${options.join(', ')}]`;\n        handlePropertyChange(property, selectString);\n      } catch (error) {\n        console.error('Failed to get select options:', error);\n        alert('Failed to load options');\n      }\n    }\n  };\n\n  // Handle API calls for dynamic data\n  const handleApiCall = async (property: string, endpoint: string) => {\n    if (onApiCall) {\n      try {\n        const result = await onApiCall(endpoint);\n        handlePropertyChange(property, result);\n      } catch (error) {\n        console.error('API call failed:', error);\n        alert('Failed to fetch data from API');\n      }\n    }\n  };\n\n  // Handle custom actions\n  const handleCustomAction = async (property: string, action: string, data: any) => {\n    if (onCustomAction) {\n      try {\n        const result = await onCustomAction(action, data);\n        handlePropertyChange(property, result);\n      } catch (error) {\n        console.error('Custom action failed:', error);\n        alert('Failed to execute action');\n      }\n    }\n  };\n\n  // Check if a property is a select field\n  const isSelectField = (value: any): boolean => {\n    if (typeof value !== 'string') return false;\n    const selectPattern = /^\\[([^\\]]+)\\]$/;\n    const match = value.match(selectPattern);\n    return !!(match && (match[1].includes(',') || match[1].includes('|')));\n  };\n\n  // Check if a property is a date/datetime field\n  const isDateField = (name: string, value: any): boolean => {\n    const lowerName = name.toLowerCase();\n    const isDateType = ['date', 'time', 'datetime', 'created', 'updated', 'start', 'end', 'timestamp'].includes(lowerName);\n    \n    if (isDateType) return true;\n    \n    // Also check if the value is a valid date string\n    if (typeof value === 'string') {\n      const date = new Date(value);\n      return !isNaN(date.getTime());\n    }\n    \n    return false;\n  };\n\n  // Get field type for display\n  const getFieldTypeDisplay = (name: string, value: any): string => {\n    if (typeof value === 'number') return 'number';\n    if (typeof value === 'boolean') return 'boolean';\n    if (Array.isArray(value)) return 'array';\n    if (typeof value === 'object' && value !== null) return 'object';\n    if (isSelectField(value)) return 'select';\n    if (isDateField(name, value)) return 'date/datetime';\n    if (typeof value === 'string' && (value.length > 40 || value.includes('\\n'))) return 'long text';\n    return 'text';\n  };\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-lg font-medium\">\n          Properties - {componentType}\n          {selectedInstance && (\n            <span className=\"text-sm text-gray-500 ml-2\">\n              (ID: {selectedInstance.id})\n            </span>\n          )}\n        </h3>\n      </div>\n\n      {/* Properties list */}\n      <div className=\"space-y-4\">\n        {Object.entries(currentProps).map(([key, value]) => {\n          const isSelect = isSelectField(value);\n          const isDate = isDateField(key, value);\n          const fieldType = getFieldTypeDisplay(key, value);\n          \n          return (\n            <div\n              key={key}\n              className=\"border-b border-gray-100 pb-3 last:border-b-0\"\n            >\n              <div className=\"flex items-center justify-between mb-2\">\n                <label className=\"block text-sm font-medium text-gray-700 capitalize\">\n                  {key.replace(/([A-Z])/g, \" $1\").trim()}\n                </label>\n                \n                {/* Action buttons for specific field types */}\n                <div className=\"flex space-x-1\">\n                  {isSelect && onGetSelectOptions && (\n                    <button\n                      onClick={() => handleGetSelectOptions(key)}\n                      className=\"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700\"\n                      title=\"Refresh options\"\n                    >\n                      Refresh\n                    </button>\n                  )}\n                  {key.toLowerCase().includes('api') && onApiCall && (\n                    <button\n                      onClick={() => handleApiCall(key, '/api/data')}\n                      className=\"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700\"\n                    >\n                      Fetch\n                    </button>\n                  )}\n                  {key.toLowerCase().includes('action') && onCustomAction && (\n                    <button\n                      onClick={() => handleCustomAction(key, 'customAction', currentProps)}\n                      className=\"text-xs bg-purple-600 text-white px-2 py-1 rounded hover:bg-purple-700\"\n                    >\n                      Run\n                    </button>\n                  )}\n                </div>\n              </div>\n              \n              {/* Property field */}\n              <PropertyField\n                name={key}\n                value={value}\n                onChange={(newValue) => handlePropertyChange(key, newValue)}\n                onFileUpload={onFileUpload}\n              />\n              \n              {/* Field type indicator */}\n              <div className=\"text-xs text-gray-400 mt-1 flex justify-between\">\n                <span>Type: {fieldType}</span>\n                {isSelect && <span className=\"text-blue-500\">Select Field</span>}\n                {isDate && <span className=\"text-green-500\">Date Field</span>}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* No properties message */}\n      {Object.keys(currentProps).length === 0 && (\n        <div className=\"text-center py-8 text-gray-500\">\n          <div className=\"text-4xl mb-2\">ðŸ“</div>\n          <p>No properties available for this component</p>\n          <p className=\"text-sm mt-1\">Properties will appear here when the component has configurable options</p>\n        </div>\n      )}\n\n      {/* Clear selection button */}\n      {selectedInstance && (\n        <div className=\"mt-6 pt-4 border-t\">\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => {\n                setSelectedInstance(null);\n                setSelectedComponent(null);\n              }}\n              className=\"flex-1 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors font-medium\"\n            >\n              Clear Selection\n            </button>\n            <button\n              onClick={() => {\n                // Reset all properties to their default values\n                const defaultProps = selectedInstance?.props || {};\n                const resetProps = Object.keys(defaultProps).reduce((acc, key) => {\n                  const value = defaultProps[key];\n                  // Reset to initial value based on type\n                  if (typeof value === 'number') acc[key] = 0;\n                  else if (typeof value === 'boolean') acc[key] = false;\n                  else if (Array.isArray(value)) acc[key] = [];\n                  else if (typeof value === 'object') acc[key] = {};\n                  else acc[key] = '';\n                  return acc;\n                }, {} as Record<string, any>);\n                \n                handlePropertyChange('*RESET*', resetProps);\n              }}\n              className=\"px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors font-medium text-sm\"\n              title=\"Reset all properties to default values\"\n            >\n              Reset\n            </button>\n          </div>\n          <p className=\"text-sm text-gray-600 mt-3\">\n            This is a GridStack widget. Property changes will update the\n            widget in real-time.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};","import { useCallback } from 'react';\nimport { useGridStackContext } from '@/lib/grid-stack-context';\n\nexport default function DeleteDropZone({ onDropDelete }: { onDropDelete: () => void }) {\n  const { removeWidget } = useGridStackContext();\n\n  const handleDrop = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    \n    // Get the widget ID from drag data\n    const widgetId = event.dataTransfer.getData('text/plain');\n    if (widgetId) {\n      // Remove widget from gridstack\n      const el = document.querySelector(`[gs-id=\"${widgetId}\"]`) as HTMLElement | null;\n      if (el && (el as any).gridstackNode?.grid) {\n        (el as any).gridstackNode.grid.removeWidget(el, true, true);\n      }\n      \n      // Remove from context\n      removeWidget(widgetId);\n    }\n    \n    onDropDelete();\n  }, [onDropDelete, removeWidget]);\n\n  const handleDragOver = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleDragEnter = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.currentTarget.classList.add('bg-red-200', 'border-red-400');\n  };\n\n  const handleDragLeave = (event: React.DragEvent) => {\n    event.preventDefault();\n    event.currentTarget.classList.remove('bg-red-200', 'border-red-400');\n  };\n\n  return (\n    <div\n      id=\"trash\"\n      onDrop={handleDrop}\n      onDragOver={handleDragOver}\n      onDragEnter={handleDragEnter}\n      onDragLeave={handleDragLeave}\n      className=\"bg-red-50 min-h-14 h-18 flex items-center justify-center p-0 border-2 border-dashed border-red-200 rounded-lg transition-all duration-200 hover:bg-red-100 cursor-pointer group\"\n    >\n      <div className=\"w-full h-full flex flex-col items-center justify-center m-3\">\n        <svg \n          className=\"w-14 h-14 text-red-300 group-hover:text-red-400 transition-colors\" \n          fill=\"none\" \n          stroke=\"currentColor\" \n          viewBox=\"0 0 24 24\"\n        >\n          <path \n            strokeLinecap=\"round\" \n            strokeLinejoin=\"round\" \n            strokeWidth={1.5} \n            d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" \n          />\n        </svg>\n      </div>        \n    </div>\n  );\n}","\nimport {\n  getComponentMap,\n  ComponentMapProvider,\n} from \"./stackoptions\";\nimport { useStackPage } from \"./StackPageContext\";\nimport DeleteDropZone from \"./deletedropzone\";\n\n// Components Tab Component\nexport const ComponentsTab = ({ \n  componentMapProvider, \n  onDragStart \n}: { \n  componentMapProvider?: ComponentMapProvider;\n  onDragStart: (e: React.DragEvent, componentType: string) => void;\n}) => {\n  const { setSelectedComponent, setSelectedInstance } = useStackPage();\n  const componentMap = getComponentMap(componentMapProvider);\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      <h3 className=\"text-lg font-medium mb-3\">Components</h3>\n      <p className=\"text-sm text-gray-600 mb-4\">\n        Drag components to the main area or click to select them\n      </p>\n\n      {/* Delete Drop Zone */}\n      <div className=\"mb-4\">\n        <h4 className=\"text-sm font-medium text-gray-700 mb-2\">\n          Delete Zone\n        </h4>\n        <DeleteDropZone\n          onDropDelete={() => {\n            console.log(\"Component deleted via drop zone\");\n            setSelectedComponent(null);\n            setSelectedInstance(null);\n          }}\n        />\n        <p className=\"text-xs text-gray-500 mt-2 text-center\">\n          Drag components here to delete them\n        </p>\n      </div>\n\n      {/* SubGrid Component */}\n      <div\n        key=\"SubGrid\"\n        gs-type=\"SubGrid\"\n        data-gs-type=\"SubGrid\"\n        className=\"grid-stack-item grid-stack-item-widget\"\n        draggable=\"true\"\n        onDragStart={(e) => onDragStart(e, \"SubGrid\")}\n        onDragEnd={() => console.log(\"====SubGrid drag event end....\")}\n        onClick={() => {\n          setSelectedComponent(\"SubGrid\");\n          setSelectedInstance(null);\n        }}\n      >\n        <div className=\"p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border-2 border-dashed border-blue-300 text-sm hover:from-blue-100 hover:to-indigo-100 cursor-pointer transition-all duration-200 hover:shadow-lg text-center group\">\n          <div className=\"font-semibold text-blue-700 mb-2 flex items-center justify-center\">\n            <svg\n              className=\"w-5 h-5 mr-2 group-hover:scale-110 transition-transform\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M4 6a2 2 0 012-2h12a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V6z\"\n              />\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9 3v18M3 9h18\"\n              />\n            </svg>\n            SubGrid\n          </div>\n          <div className=\"text-xs text-blue-600 font-medium\">\n            Nested Grid Container\n          </div>\n          <div className=\"text-xs text-blue-500 mt-1\">\n            Drag to create nested layout\n          </div>\n        </div>\n      </div>\n\n      {/* Rest of the component grid */}\n      <div className=\"grid grid-cols-2 gap-3\">\n        {Object.entries(componentMap).map(([name /*Component*/]) => (\n          <div\n            key={name}\n            gs-type={name}\n            data-gs-type={name}\n            className=\"grid-stack-item grid-stack-item-widget\"\n            draggable=\"true\"\n            onDragStart={(e) => onDragStart(e, name)}\n            onDragEnd={() => console.log(\"====drag event end....\")}\n            onClick={() => {\n              setSelectedComponent(name);\n              setSelectedInstance(null);\n            }}\n          >\n            <div className=\"p-4 bg-gray-50 rounded-lg border border-gray-200 text-sm hover:bg-gray-100 cursor-pointer transition-all duration-200 hover:shadow-md text-center\">\n              <div className=\"font-medium text-gray-800 mb-2\">{name}</div>\n              <div className=\"text-xs text-gray-500\">Drag to main area</div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};","import { useStackPage } from \"./StackPageContext\";\nimport { useState, useRef, useEffect } from \"react\";\n\ninterface PageTabProps {\n  onFileUpload?: (file: File) => Promise<string>;\n  onGetTags?: () => Promise<Array<string>>;\n}\n\n// Page Tab Component\nexport const PageTab = ({ onFileUpload, onGetTags }: PageTabProps) => {\n  const { pageAttributes, setPageAttributes } = useStackPage();\n  const [imagePreview, setImagePreview] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const [tagOptions, setTagOptions] = useState<Array<string>>([\n    \"home\",\n    \"person\",\n    \"story\",\n  ]);\n\n  const handlePageAttributeChange = (attribute: string, value: string) => {\n    const newAttributes = {\n      ...pageAttributes,\n      [attribute]: value,\n    };\n    setPageAttributes(newAttributes);\n  };\n\n  const handleImageUpload = async (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Create temporary preview\n      const previewUrl = URL.createObjectURL(file);\n      setImagePreview(previewUrl);\n      setIsUploading(true);\n\n      try {\n        let finalImageUrl = previewUrl;\n\n        // Only call onFileUpload if it exists\n        if (onFileUpload) {\n          finalImageUrl = await onFileUpload(file);\n          // Clean up the temporary preview URL\n          URL.revokeObjectURL(previewUrl);\n          setImagePreview(null);\n        }\n\n        // Update the pageAttributes with the final image URL\n        handlePageAttributeChange(\"image\", finalImageUrl);\n      } catch (error) {\n        console.error(\"Failed to upload image:\", error);\n        // If upload fails, keep the preview but show error\n        alert(\"Failed to upload image. Please try again.\");\n      } finally {\n        setIsUploading(false);\n      }\n    }\n  };\n\n  const handleImageRemove = () => {\n    if (imagePreview) {\n      URL.revokeObjectURL(imagePreview);\n    }\n    setImagePreview(null);\n    handlePageAttributeChange(\"image\", \"\");\n    if (fileInputRef.current) {\n      fileInputRef.current.value = \"\";\n    }\n  };\n\n  useEffect(() => {\n    const getTags = async () => {\n      if (onGetTags) {\n        return (await onGetTags()) || [];\n      } else {\n        return [\"home\", \"person\", \"story\"];\n      }\n    };\n    \n    if(onGetTags){\n      const tags: Array<string> = (getTags() as any) || [];\n      setTagOptions(tags);\n    }\n  }, [onGetTags]);\n\n  const statusOptions = [\"draft\", \"published\"];\n\n  return (\n    <div className=\"p-4 space-y-6\">\n      <h3 className=\"text-lg font-medium mb-3\">Page Settings</h3>\n      <p className=\"text-sm text-gray-600 mb-4\">\n        Configure the overall page layout and appearance\n      </p>\n\n      <div className=\"space-y-6\">\n        {/* Image Upload Section */}\n        <div className=\"border-b border-gray-100 pb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n            Page Image\n          </label>\n          <div className=\"flex flex-col items-start space-y-3\">\n            {pageAttributes.image || imagePreview ? (\n              <div className=\"relative\">\n                <img\n                  src={pageAttributes.image || imagePreview || \"\"}\n                  alt=\"Page preview\"\n                  className=\"w-32 h-32 object-cover rounded-lg border border-gray-200\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={handleImageRemove}\n                  disabled={isUploading}\n                  className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600 disabled:bg-gray-400\"\n                >\n                  Ã—\n                </button>\n              </div>\n            ) : (\n              <div className=\"w-32 h-32 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center text-gray-400\">\n                {isUploading ? \"Uploading...\" : \"No image\"}\n              </div>\n            )}\n            <input\n              ref={fileInputRef}\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageUpload}\n              disabled={isUploading}\n              className=\"hidden\"\n              id=\"page-image-upload\"\n            />\n            <label\n              htmlFor=\"page-image-upload\"\n              className={`px-4 py-2 rounded-lg transition-colors cursor-pointer text-sm ${\n                isUploading\n                  ? \"bg-gray-400 text-gray-200 cursor-not-allowed\"\n                  : \"bg-blue-600 text-white hover:bg-blue-700\"\n              }`}\n            >\n              {isUploading ? \"Uploading...\" : \"Upload Image\"}\n            </label>\n            <p className=\"text-xs text-gray-500\">\n              {onFileUpload\n                ? \"Image will be uploaded to your server\"\n                : \"Image will be stored locally (for demo)\"}\n            </p>\n          </div>\n        </div>\n\n        {/* Tag Selection */}\n        <div className=\"border-b border-gray-100 pb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Tag\n          </label>\n          <select\n            value={pageAttributes.tag || \"\"}\n            onChange={(e) => handlePageAttributeChange(\"tag\", e.target.value)}\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            <option value=\"\">Select a tag</option>\n            {tagOptions.map((tag: string) => (\n              <option key={tag} value={tag}>\n                {tag}\n              </option>\n            ))}\n          </select>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Categorize your page with a tag\n          </p>\n        </div>\n\n        {/* Status Selection */}\n        <div className=\"border-b border-gray-100 pb-4\">\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Status\n          </label>\n          <select\n            value={pageAttributes.status || \"draft\"}\n            onChange={(e) =>\n              handlePageAttributeChange(\"status\", e.target.value)\n            }\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n          >\n            {statusOptions.map((status) => (\n              <option key={status} value={status}>\n                {status.charAt(0).toUpperCase() + status.slice(1)}\n              </option>\n            ))}\n          </select>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Set the publication status of this page\n          </p>\n        </div>\n\n        {/* Show Menu Checkbox */}\n        <div className=\"border-b border-gray-100 pb-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Show Component Menu\n              </label>\n              <p className=\"text-xs text-gray-500\">\n                Display the menu bar with delete button on each component\n              </p>\n            </div>\n            <div className=\"flex items-center\">\n              <input\n                type=\"checkbox\"\n                checked={pageAttributes.showMenubar}\n                onChange={(e) =>\n                  handlePageAttributeChange(\n                    \"showMenubar\",\n                    e.target.checked as any\n                  )\n                }\n                className=\"w-4 h-4 text-blue-600 rounded focus:ring-blue-500\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* Layout Settings */}\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Margin\n          </label>\n          <input\n            type=\"text\"\n            value={pageAttributes.margin}\n            onChange={(e) =>\n              handlePageAttributeChange(\"margin\", e.target.value)\n            }\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            placeholder=\"e.g., 0, 10px, 1rem\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Space around the entire page content\n          </p>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Padding\n          </label>\n          <input\n            type=\"text\"\n            value={pageAttributes.padding}\n            onChange={(e) =>\n              handlePageAttributeChange(\"padding\", e.target.value)\n            }\n            className=\"w-full p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            placeholder=\"e.g., 20px, 2rem\"\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Space inside the page container\n          </p>\n        </div>\n\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Background Color\n          </label>\n          <div className=\"flex gap-3 items-center\">\n            <input\n              type=\"color\"\n              value={pageAttributes.background}\n              onChange={(e) =>\n                handlePageAttributeChange(\"background\", e.target.value)\n              }\n              className=\"w-12 h-12 border border-gray-300 rounded cursor-pointer\"\n            />\n            <input\n              type=\"text\"\n              value={pageAttributes.background}\n              onChange={(e) =>\n                handlePageAttributeChange(\"background\", e.target.value)\n              }\n              className=\"flex-1 p-2 border border-gray-300 rounded text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              placeholder=\"#ffffff, rgb(255,255,255), etc.\"\n            />\n          </div>\n          <p className=\"text-xs text-gray-500 mt-1\">\n            Background color for the main content area\n          </p>\n        </div>\n      </div>\n\n      <div className=\"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n        <h4 className=\"font-medium text-blue-800 mb-2\">\n          Current Page Settings\n        </h4>\n        <div className=\"text-sm text-blue-700 grid grid-cols-2 gap-2\">\n          <div>\n            Menu Bar:{\" \"}\n            <code>{pageAttributes.showMenubar ? \"Visible\" : \"Hidden\"}</code>\n          </div>\n          <div>\n            Tag: <code>{pageAttributes.tag || \"Not set\"}</code>\n          </div>\n          <div>\n            Status: <code>{pageAttributes.status || \"draft\"}</code>\n          </div>\n          <div>\n            Margin: <code>{pageAttributes.margin}</code>\n          </div>\n          <div>\n            Padding: <code>{pageAttributes.padding}</code>\n          </div>\n          <div>\n            Background: <code>{pageAttributes.background}</code>\n          </div>\n          <div className=\"col-span-2\">\n            Image:{\" \"}\n            <code>\n              {pageAttributes.image\n                ? onFileUpload\n                  ? \"Remote\"\n                  : \"Local\"\n                : \"Not set\"}\n            </code>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import { useState } from \"react\";\nimport { ArrowPathIcon } from \"@heroicons/react/24/outline\";\n\n// StatusButton component\nexport function StatusButton({\n  onClick,\n  icon,\n  label,\n  className = \"\",\n  successMessage = \"Success\",\n  errorMessage = \"Error\",\n}: {\n  onClick: () => Promise<void>;\n  icon: React.ReactNode;\n  label: string;\n  className?: string;\n  successMessage?: string;\n  errorMessage?: string;\n}) {\n  const [status, setStatus] = useState<{\n    message: string;\n    type: \"success\" | \"error\";\n  } | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleClick = async () => {\n    setIsLoading(true);\n    setStatus(null);\n    try {\n      await onClick();\n      setStatus({ message: successMessage, type: \"success\" });\n    } catch (error) {\n      setStatus({ message: errorMessage, type: \"error\" });\n    } finally {\n      setIsLoading(false);\n      setTimeout(() => setStatus(null), 3000);\n    }\n  };\n\n  return (\n    <div className=\"relative z-30\">\n      <button\n        onClick={handleClick}\n        disabled={isLoading}\n        className={`p-2 rounded-lg transition flex items-center ${className} ${\n          isLoading ? \"opacity-70\" : \"\"\n        }`}\n      >\n        {isLoading ? (\n          <ArrowPathIcon className=\"h-5 w-5 animate-spin\" />\n        ) : (\n          <>\n            {icon}\n            <span className=\"ml-1 hidden sm:inline\">{label}</span>\n          </>\n        )}\n      </button>\n      {status && (\n        <div\n          className={`absolute top-full left-0 mt-1 w-full text-center px-2 py-1 rounded-md text-xs font-medium animate-fadeIn ${\n            status.type === \"success\"\n              ? \"bg-blue-500 text-white\"\n              : \"bg-red-100 text-red-800\"\n          }`}\n        >\n          {status.message}\n        </div>\n      )}\n    </div>\n  );\n}","// TooltipButton component\nexport function TooltipButton({\n  onClick,\n  icon,\n  tooltip,\n  className = \"\",\n}: {\n  onClick: () => void;\n  icon: React.ReactNode;\n  tooltip: string;\n  className?: string;\n}) {\n  return (\n    <div className=\"relative group\">\n      <button\n        onClick={onClick}\n        className={`p-2 rounded-lg transition ${className}`}\n      >\n        {icon}\n      </button>\n      <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 hidden group-hover:block bg-black text-white text-xs rounded py-1 px-2 whitespace-nowrap z-10\">\n        {tooltip}\n        <div className=\"absolute bottom-full left-1/2 w-2 h-2 bg-black transform -translate-x-1/2 rotate-45 -mb-1\"></div>\n      </div>\n    </div>\n  );\n}\n","/* eslint-disable react-refresh/only-export-components */\nimport { createContext, useContext, useState, ReactNode } from 'react';\n\ninterface LocaleContextType {\n  locale: string;\n  setLocale: (locale: string) => void;\n}\n\nconst LocaleContext = createContext<LocaleContextType | undefined>(undefined);\n\nexport const useLocale = () => {\n  const context = useContext(LocaleContext);\n  if (!context) {\n    throw new Error('useLocale must be used within a LocaleProvider');\n  }\n  return context;\n};\n\ninterface LocaleProviderProps {\n  children: ReactNode;\n  defaultLocale?: string;\n}\n\nexport const LocaleProvider = ({ children, defaultLocale = 'en-US' }: LocaleProviderProps) => {\n  const [locale, setLocale] = useState(defaultLocale);\n\n  return (\n    <LocaleContext.Provider value={{ locale, setLocale }}>\n      {children}\n    </LocaleContext.Provider>\n  );\n};","import { useState, useRef, useEffect, ReactNode, useCallback } from \"react\";\nimport {\n  ArrowLeftIcon,\n  ArrowPathIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  TrashIcon,\n  CloudArrowDownIcon,\n  EyeIcon,\n  ArrowLeftCircleIcon,\n  PencilIcon,\n  InformationCircleIcon,\n} from \"@heroicons/react/24/outline\";\n\nimport {\n  GridStackProvider,\n  GridStackRender,\n  GridStackRenderProvider,\n} from \"..\";\nimport { GridStackOptions, GridStackWidget } from \"gridstack\";\nimport {\n  gridOptions,\n  subGridOptions,\n  PageProps,\n  getDefaultPageProps,\n  getComponentMap,\n  getComponentProps,\n  ComponentMapProvider,\n  ComponentPropsProvider,\n  GoBackListFn,\n  LoadLayoutFn,\n  SaveLayoutFn,\n  FileUploadFn,\n  GetTagsFn,\n  ApiCallFn,\n  CustomActionFn,\n  GetSelectOptionsFn,\n} from \"./stackoptions\";\n\nimport StackActions, { StackActionsRef } from \"./stackactions\";\nimport { GridStackDropEvent } from \"../grid-stack-render-provider\";\nimport PageInfoDialogs from \"./pageinfodialog\";\n// Import the new context\nimport { StackPageProvider } from \"./StackPageProvider\";\nimport { useStackPage } from \"./StackPageContext\";\nimport { PropertiesTab } from \"./PropertiesTab\";\nimport { ComponentsTab } from \"./ComponentsTab\";\nimport { PageTab } from \"./PageTab\";\nimport { StatusButton } from \"./StatusButton\";\nimport { TooltipButton } from \"./TooltipButton\";\nimport { LocaleProvider } from \"./LocaleContext.tsx\";\n\nimport \"../styles/index.css\";\n\nexport interface StackPageProps {\n  pageid: string;\n  pageMode: \"edit\" | \"preview\" | \"view\";\n  onLoadLayout: LoadLayoutFn;\n  onSaveLayout: SaveLayoutFn;\n  gobackList: GoBackListFn;\n  componentMapProvider?: ComponentMapProvider;\n  componentPropsProvider?: ComponentPropsProvider;\n  onFileUpload?: FileUploadFn;\n  onGetTags?: GetTagsFn;\n  onApiCall?: ApiCallFn;\n  onCustomAction?: CustomActionFn;\n  onGetSelectOptions?: GetSelectOptionsFn;\n  children?: ReactNode;\n}\n\n// Mobile detection hook\nconst useMobile = () => {\n  const [isMobile, setIsMobile] = useState(false);\n\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth <= 768);\n    };\n\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n\n    return () => {\n      window.removeEventListener(\"resize\", checkMobile);\n    };\n  }, []);\n\n  return isMobile;\n};\n\n// Main StackPage Content Component\nconst StackPageContent = ({\n  pageid,\n  pageMode,\n  onSaveLayout,\n  onLoadLayout,\n  componentMapProvider,\n  componentPropsProvider,\n  gobackList,\n  onFileUpload,\n  onGetTags,\n  onApiCall,\n  onCustomAction,\n  onGetSelectOptions,\n  children,\n}: StackPageProps) => {\n  const [currentMode, setCurrentMode] = useState<\"edit\" | \"preview\" | \"view\">(\n    pageMode\n  );\n  const [showEditor, setShowEditor] = useState(true);\n  const [isEditingTitle, setIsEditingTitle] = useState(false);\n\n  const {\n    activeTab,\n    setActiveTab,\n    pageAttributes,\n    setPageAttributes,\n    setSelectedInstance,\n    setSelectedComponent,\n    widgetProps, // Add this to get widgetProps from context\n  } = useStackPage();\n\n  const [pageProps, setPageProps] = useState<PageProps>({\n    ...getDefaultPageProps(),\n    id: pageid,\n  });\n  const [title, setTitle] = useState<string>();\n  const [pageTitle, setPageTitle] = useState<string>();\n\n  const [resetKey, setResetKey] = useState(0);\n  const [initialOptions, setInitialOptions] =\n    useState<GridStackOptions>(gridOptions);\n  const stackActionsRef = useRef<StackActionsRef>(null);\n\n  const [dropEvent, setDropEvent] = useState<GridStackDropEvent>();\n  const [showGridInfo, setShowGridInfo] = useState(false);\n\n  const isMobile = useMobile();\n\n  // Update currentMode when pageMode prop changes\n  useEffect(() => {\n    setCurrentMode(pageMode);\n  }, [pageMode]);\n\n  const handleLoadLayout = useCallback(\n    async (pageid: string): Promise<any> => {\n      const pageProps = (await onLoadLayout(pageid)) || getDefaultPageProps();\n      setPageProps(pageProps);\n      setTitle(pageProps.title);\n      setPageTitle(pageProps.title);\n      setPageAttributes(pageProps.pageAttributes || pageAttributes);\n      return pageProps.grids;\n    },\n    [onLoadLayout]\n  );\n\n  const handleReload = useCallback(async () => {\n    if (pageid) {\n      const gridOptions: any = await handleLoadLayout(pageid);\n      setInitialOptions(gridOptions);\n      // Force remount\n      setResetKey((prev) => prev + 1);\n      clearSelectedData();\n      console.log(`reload layout: pageid ${pageid}, props id ${pageProps?.id}`);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [pageid, handleLoadLayout]);\n\n  // Load layout when component mounts or pageid changes\n  useEffect(() => {\n    const loadLayout = async () => {\n      if (pageid) {\n        try {\n          await handleReload();\n        } catch (error) {\n          console.error(\"Failed to load layout:\", error);\n        }\n      }\n    };\n    loadLayout();\n  }, [pageid, handleReload]);\n\n  const handleGoBack = () => {\n    if (gobackList) {\n      gobackList();\n    }\n  };\n\n  // Function to update layout with new props from context\n  const updateLayoutWithNewProps = (\n    layout: GridStackOptions | GridStackWidget[],\n    widgetProps: Map<string, object>\n  ): GridStackOptions | GridStackWidget[] => {\n    if (!layout) return layout;\n\n    // Handle both GridStackOptions (with children) and GridStackWidget[] array\n    const children = Array.isArray(layout)\n      ? layout\n      : (layout as GridStackOptions).children;\n\n    if (!children) return layout;\n\n    const updatedChildren = children.map((child: GridStackWidget) => {\n      // If this widget has updated props in context, update its content\n      if (child.id && widgetProps.has(child.id)) {\n        const updatedProps = widgetProps.get(child.id);\n\n        try {\n          // Parse the existing content to preserve the component name\n          let contentObj = { name: \"\", props: {} };\n          if (child.content) {\n            contentObj = JSON.parse(child.content);\n          }\n\n          // Merge the updated props\n          contentObj.props = { ...contentObj.props, ...updatedProps };\n\n          // Update the content with new props\n          return {\n            ...child,\n            content: JSON.stringify(contentObj),\n          };\n        } catch (error) {\n          console.error(`Error updating props for widget ${child.id}:`, error);\n          return child;\n        }\n      }\n\n      return child;\n    });\n\n    // Return the updated layout with the same structure\n    if (Array.isArray(layout)) {\n      return updatedChildren;\n    } else {\n      return {\n        ...layout,\n        children: updatedChildren,\n      };\n    }\n  };\n\n  // Default handlers\n  const handleSave = async () => {\n    if (onSaveLayout) {\n      let layout = stackActionsRef.current?.saveLayout();\n      console.log(\"****grid stack layout: \", layout);\n\n      if (layout) {\n        // Update the layout with the latest props from context\n        layout = updateLayoutWithNewProps(layout, widgetProps);\n\n        const savedPageProps: PageProps = {\n          ...(pageProps || getDefaultPageProps()),\n          grids: layout,\n          title: pageTitle as any,\n          tag: pageAttributes.tag,\n          status: pageAttributes.status,\n          pageAttributes: pageAttributes,\n        };\n        console.log(\n          `Saving layout: pageid ${pageid}, props id ${savedPageProps.id}`\n        );\n        await onSaveLayout(pageid, savedPageProps);\n      }\n    }\n  };\n\n  const clearSelectedData = () => {\n    setSelectedComponent(null);\n    setSelectedInstance(null);\n  };\n\n  const handleClear = () => {\n    if (\n      confirm(\"Are you sure you want to clear all data? This cannot be undone.\")\n    ) {\n      setInitialOptions(gridOptions);\n      // Force remount\n      setResetKey((prev) => prev + 1);\n\n      clearSelectedData();\n    }\n  };\n\n  const handleTitleEdit = () => {\n    setIsEditingTitle(true);\n  };\n\n  const handleTitleSave = () => {\n    setIsEditingTitle(false);\n  };\n\n  const handleTitleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\") {\n      handleTitleSave();\n    } else if (e.key === \"Escape\") {\n      setPageTitle(title);\n      setIsEditingTitle(false);\n    }\n  };\n\n  const handleDragStart = (e: React.DragEvent, componentType: string) => {\n    e.dataTransfer.setData(\"text/plain\", componentType);\n    e.dataTransfer.effectAllowed = \"copy\";\n  };\n\n  const handleDropEvent = (event: GridStackDropEvent) => {\n    setDropEvent(event);\n  };\n\n  // Add handler for widget selection from gridstack\n  const handleWidgetSelect = useCallback(\n    (widgetData: { id: string; name: string; props: object }) => {\n      const instance = {\n        id: widgetData.id,\n        type: widgetData.name,\n        props: widgetData.props,\n      };\n\n      setSelectedInstance(instance);\n      setSelectedComponent(widgetData.name);\n      setActiveTab(\"properties\");\n    },\n    [setSelectedInstance, setSelectedComponent, setActiveTab]\n  );\n\n  const getPageInfo = () => {\n    const pageInfo: PageProps = JSON.parse(JSON.stringify(pageProps));\n    pageInfo.grids = stackActionsRef.current?.saveLayout();\n    return pageInfo;\n  };\n\n  useEffect(() => {\n    if (dropEvent && stackActionsRef.current) {\n      if (dropEvent.name !== \"SubGrid\") {\n        stackActionsRef.current.addWidget((_id) => ({\n          ...dropEvent,\n          sizeToContent: true,\n          content: JSON.stringify({\n            name: dropEvent.name,\n            props: getComponentProps(componentPropsProvider)[dropEvent.name],\n          }),\n        }));\n      } else {\n        stackActionsRef.current.addSubGrid((_id) => ({\n          ...dropEvent,\n          ...subGridOptions,\n        }));\n      }\n    }\n  }, [dropEvent, componentPropsProvider]);\n\n  // Panel styles for different screen sizes\n  const panelStyle = isMobile\n    ? { width: \"100vw\", minWidth: \"100vw\", height: \"100vh\" }\n    : { width: `400px`, minWidth: \"300px\", height: \"100%\" };\n\n  // Main content style\n  const mainContentStyle = {\n    margin: pageAttributes.margin,\n    padding: pageAttributes.padding,\n    backgroundColor: pageAttributes.background,\n  };\n\n  return (\n    <GridStackProvider key={resetKey} initialOptions={initialOptions}>\n      <div className=\"min-h-screen bg-white text-black flex flex-col\">\n        {/* Toolbar - Only show in edit mode */}\n        {currentMode === \"edit\" && (\n          <header className=\"mx-2 p-4 bg-white shadow relative\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center\">\n              {/* Title and Description - Left side */}\n              <div className=\"flex-1 mb-3 sm:mb-0 min-w-0\">\n                <div className=\"flex items-center gap-2\">\n                  {isEditingTitle ? (\n                    <div className=\"flex items-center gap-2\">\n                      <input\n                        type=\"text\"\n                        value={pageTitle}\n                        onChange={(e) => setPageTitle(e.target.value)}\n                        onKeyDown={handleTitleKeyDown}\n                        onBlur={handleTitleSave}\n                        className=\"text-2xl font-bold border-b-2 border-blue-500 bg-transparent outline-none px-1\"\n                        autoFocus\n                      />\n                    </div>\n                  ) : (\n                    <div className=\"flex items-center gap-2 group\">\n                      <h1 className=\"text-2xl font-bold truncate\">\n                        {pageTitle}\n                      </h1>\n                      <button\n                        onClick={handleTitleEdit}\n                        className=\"p-1 text-gray-400 hover:text-gray-600 opacity-0 group-hover:opacity-100 transition-opacity\"\n                      >\n                        <PencilIcon className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  )}\n                </div>\n              </div>\n\n              {/* Button Group - Right side */}\n              <div className=\"flex flex-wrap gap-1 justify-end\">\n                {/* Back to List */}\n                <TooltipButton\n                  onClick={handleGoBack}\n                  icon={<ArrowLeftIcon className=\"h-5 w-5\" />}\n                  tooltip=\"Back to list\"\n                  className=\"bg-gray-200 hover:bg-gray-300\"\n                />\n\n                {/* Preview */}\n                <TooltipButton\n                  onClick={() => setCurrentMode(\"preview\")}\n                  icon={<EyeIcon className=\"h-5 w-5\" />}\n                  tooltip=\"Preview\"\n                  className=\"bg-purple-600 hover:bg-purple-700 text-white\"\n                />\n\n                {/* Save */}\n                <StatusButton\n                  onClick={handleSave}\n                  icon={<CloudArrowDownIcon className=\"h-5 w-5\" />}\n                  label=\"Save\"\n                  className=\"bg-green-600 hover:bg-green-700 text-white\"\n                  successMessage=\"Saved successfully!\"\n                  errorMessage=\"Save failed\"\n                />\n\n                {/* Reload */}\n                <StatusButton\n                  onClick={handleReload}\n                  icon={<ArrowPathIcon className=\"h-5 w-5\" />}\n                  label=\"Reload\"\n                  className=\"bg-green-600 hover:bg-green-700 text-white\"\n                  successMessage=\"Reloaded successfully\"\n                  errorMessage=\"Failed to reload\"\n                />\n\n                {/* Clear */}\n                <TooltipButton\n                  onClick={handleClear}\n                  icon={<TrashIcon className=\"h-5 w-5\" />}\n                  tooltip=\"Clear all data\"\n                  className=\"bg-red-600 hover:bg-red-700 text-white\"\n                />\n\n                {/* Page Info */}\n                <TooltipButton\n                  onClick={() => setShowGridInfo(true)}\n                  icon={<InformationCircleIcon className=\"h-5 w-5\" />}\n                  tooltip=\"Page Info & Settings\"\n                  className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\n                />\n\n                {/* Toggle Editor - Hide on mobile when panel is open */}\n                {!isMobile && (\n                  <TooltipButton\n                    onClick={() => setShowEditor(!showEditor)}\n                    icon={\n                      showEditor ? (\n                        <ChevronRightIcon className=\"h-5 w-5\" />\n                      ) : (\n                        <ChevronLeftIcon className=\"h-5 w-5\" />\n                      )\n                    }\n                    tooltip={showEditor ? \"Hide Editor\" : \"Show Editor\"}\n                    className=\"bg-gray-200 hover:bg-gray-300\"\n                  />\n                )}\n              </div>\n            </div>\n          </header>\n        )}\n\n        {/* Main Content Area */}\n        <div className=\"flex flex-1 overflow-hidden relative\">\n          {/* Main Content */}\n          <div\n            className={`flex-1 transition-all duration-200 ${\n              showEditor && currentMode === \"edit\"\n                ? \"overflow-auto\"\n                : \"overflow-hidden\"\n            }`}\n            style={mainContentStyle}\n          >\n            <div className=\"h-full\">\n              <div className=\"bg-white rounded-lg shadow h-full flex flex-col\">\n                <div\n                  className={`flex-1 relative p-0 grid-stack-mode-${currentMode}`}\n                >\n                  {/* Render existing component instances */}\n                  <StackActions ref={stackActionsRef} />\n                  <GridStackRenderProvider\n                    onGridStackDropEvent={handleDropEvent}\n                  >\n                    <GridStackRender\n                      componentMap={getComponentMap(componentMapProvider)}\n                      showMenubar={pageAttributes.showMenubar}\n                      onWidgetSelect={handleWidgetSelect}\n                    />\n                  </GridStackRenderProvider>\n\n                  {/* Custom children content */}\n                  {children}\n                </div>\n              </div>\n            </div>\n          </div>\n          {/* Main Content End*/}\n\n          {/* Editor Panel - Only show in edit mode when enabled */}\n          {currentMode === \"edit\" && showEditor && (\n            <>\n              {/* Mobile Overlay */}\n              {isMobile && (\n                <div\n                  className=\"fixed inset-0 bg-black bg-opacity-50 z-40\"\n                  onClick={() => setShowEditor(false)}\n                />\n              )}\n\n              {/* Panel */}\n              <div\n                className={`flex flex-col bg-white shadow-lg border-l border-gray-200 ${\n                  isMobile\n                    ? \"fixed right-0 top-0 bottom-0 z-50 transform transition-transform duration-300\"\n                    : \"relative\"\n                }`}\n                style={panelStyle}\n              >\n                {/* Close button for mobile */}\n                {isMobile && (\n                  <div className=\"absolute top-4 right-4 z-10\">\n                    <button\n                      onClick={() => setShowEditor(false)}\n                      className=\"p-2 bg-gray-200 rounded-full hover:bg-gray-300 transition-colors\"\n                    >\n                      <ChevronRightIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                )}\n\n                {/* Tab Header */}\n                <div className=\"flex border-b border-gray-200 pt-4\">\n                  {([\"components\", \"properties\", \"page\"] as const).map(\n                    (tab) => (\n                      <button\n                        key={tab}\n                        className={`flex-1 py-3 px-4 text-sm font-medium capitalize transition-colors ${\n                          activeTab === tab\n                            ? \"text-blue-600 border-b-2 border-blue-600 bg-blue-50\"\n                            : \"text-gray-500 hover:text-gray-700 hover:bg-gray-50\"\n                        }`}\n                        onClick={() => setActiveTab(tab)}\n                      >\n                        {tab}\n                      </button>\n                    )\n                  )}\n                </div>\n\n                {/* Tab Content */}\n<div className=\"flex-1 overflow-y-auto pb-4\">\n  <div style={{ display: activeTab === \"components\" ? \"block\" : \"none\" }}>\n    <ComponentsTab\n      componentMapProvider={componentMapProvider}\n      onDragStart={handleDragStart}\n    />\n  </div>\n  <div style={{ display: activeTab === \"properties\" ? \"block\" : \"none\" }}>\n    <PropertiesTab\n      onFileUpload={onFileUpload}\n      onApiCall={onApiCall}\n      onCustomAction={onCustomAction}\n      onGetSelectOptions={onGetSelectOptions}\n    />\n  </div>\n  <div style={{ display: activeTab === \"page\" ? \"block\" : \"none\" }}>\n    <PageTab\n      onFileUpload={onFileUpload}\n      onGetTags={onGetTags}\n    />\n  </div>\n</div>\n              </div>\n            </>\n          )}\n        </div>\n        {/* Main Content Area End*/}\n\n        {/* Mobile toggle button */}\n        {currentMode === \"edit\" && isMobile && !showEditor && (\n          <div className=\"fixed bottom-4 right-4 z-30\">\n            <button\n              onClick={() => setShowEditor(true)}\n              className=\"p-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors\"\n            >\n              <ChevronLeftIcon className=\"h-6 w-6\" />\n            </button>\n          </div>\n        )}\n\n        {/* Floating Return Button - Show immediately in preview mode */}\n        {currentMode === \"preview\" && (\n          <div className=\"fixed inset-0 pointer-events-none z-50\">\n            <div className=\"absolute bottom-8 right-8 pointer-events-auto\">\n              <button\n                onClick={() => setCurrentMode(\"edit\")}\n                className=\"flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 group\"\n                title=\"Return to Edit Mode\"\n              >\n                <ArrowLeftCircleIcon className=\"h-6 w-6 group-hover:animate-bounce\" />\n                <span className=\"text-sm font-medium\">Edit Mode</span>\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Floating Return Button - For view mode (external) */}\n        {currentMode === \"view\" && (\n          <div className=\"fixed inset-0 pointer-events-none z-50\">\n            <div className=\"absolute bottom-8 right-8 pointer-events-auto\">\n              <button\n                onClick={gobackList}\n                className=\"flex items-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 group\"\n                title=\"Back to List\"\n              >\n                <ArrowLeftCircleIcon className=\"h-6 w-6 group-hover:animate-bounce\" />\n                <span className=\"text-sm font-medium\">Back to List</span>\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* show page info */}\n        <PageInfoDialogs\n          isOpen={showGridInfo}\n          pageInfo={getPageInfo()}\n          resetOpenInfo={setShowGridInfo}\n        />\n      </div>\n    </GridStackProvider>\n  );\n};\n\n// Main exported component with StackPageProvider\nconst StackPage = (props: StackPageProps) => {\n  return (\n    <LocaleProvider defaultLocale=\"ja-JP\">\n      <StackPageProvider>\n        <StackPageContent {...props} />\n      </StackPageProvider>\n    </LocaleProvider>\n  );\n};\n\nexport default StackPage;\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","GridStackContext","createContext","useGridStackContext","context","useContext","GridStackProvider","children","initialOptions","gridStack","setGridStack","useState","rawWidgetMetaMap","setRawWidgetMetaMap","map","deepFindNodeWithContent","obj","_a","child","addWidget","useCallback","fn","newId","widget","prev","newMap","addSubGrid","subWidgetIdMap","w","subWidgetId","meta","id","removeWidget","saveOptions","_","jsx","GridStackRenderContext","useGridStackRenderContext","hasElementType","hasMap","hasSet","hasArrayBuffer","equal","length","i","keys","it","reactFastCompare","error","byteToHex","unsafeStringify","arr","offset","getRandomValues","rnds8","rng","native","v4","options","buf","rnds","originalResizeToContent","GridStack","el","content","GridStackRenderProvider","onGridStackDropEvent","widgetContainersRef","useRef","containerRef","optionsRef","renderCBFn","element","initGrid","grid","_event","_previousNode","newNode","type","dropEvent","uuidv4","useLayoutEffect","isEqual","useMemo","widgetId","GridStackWidgetContext","useGridStackWidgetContext","GridStackItemMenu","isMenuOpen","setIsMenuOpen","React","menuPosition","setMenuPosition","menuButtonRef","handleMenuClick","event","rect","handleClose","handleDelete","handleClickOutside","jsxs","GridStackAutoResizer","useEffect","container","resize","_b","observer","parseWidgetMeta","name","props","result","GridStackWidgetRenderer","WidgetComponent","widgetContainer","showMenubar","isSelected","onWidgetSelect","componentProps","componentData","title","handleWidgetClick","_e","createPortal","StackPageContext","useStackPage","useStackPageWidgetProps","GridStackRender","componentMap","_rawWidgetMetaMap","getWidgetContainer","widgetProps","selectedInstance","Fragment","metaProps","ArrowLeftCircleIcon","titleId","svgRef","ForwardRef","ArrowLeftIcon","ArrowPathIcon","ChevronLeftIcon","ChevronRightIcon","CloudArrowDownIcon","EyeIcon","InformationCircleIcon","PencilIcon","TrashIcon","Text","CELL_HEIGHT","BREAKPOINTS","gridOptions","subGridOptions","getDefaultPageProps","defaultComponentProps","defaultComponents","getComponentMap","customMap","getComponentProps","customObject","StackActions","forwardRef","ref","useImperativeHandle","PageInfo","pageInfo","layout","setLayout","PageInfoDialogs","isOpen","resetOpenInfo","copy","setCopy","handleCopy","handleBackdropClick","StackPageProvider","selectedComponent","setSelectedComponent","setSelectedInstance","pageAttributes","setPageAttributes","activeTab","setActiveTab","setWidgetProps","updateWidgetProps","contextValue","useWidgetProps","updates","currentProps","PropertyField","value","onChange","onFileUpload","fileInputRef","isUploading","setIsUploading","urlInput","setUrlInput","isValidDate","dateString","date","isValidHttpUrl","string","url","detectFieldType","lowerName","dateName","selectPattern","match","optionsString","parseSelectOptions","selectString","opt","formatDateForInput","dateValue","parseDateFromInput","inputValue","formatDateForDisplay","year","month","day","hours","minutes","getFileType","fileValue","extension","imageExtensions","videoExtensions","audioExtensions","documentExtensions","getFileAccept","fileType","fieldType","handleFileUpload","file","fileUrl","reader","dataUrl","handleUrlInputChange","newUrl","handleUrlSubmit","handleFileRemove","renderFilePreview","currentValue","option","parsedValue","formatted","PropertiesTab","onApiCall","onCustomAction","onGetSelectOptions","updateProps","getProps","componentType","currentInstanceProps","updatedPropsFromContext","handlePropertyChange","property","updatedProps","updatedInstance","handleGetSelectOptions","handleApiCall","endpoint","handleCustomAction","action","data","isSelectField","isDateField","getFieldTypeDisplay","key","isSelect","isDate","newValue","defaultProps","resetProps","acc","DeleteDropZone","onDropDelete","handleDrop","handleDragOver","handleDragEnter","handleDragLeave","ComponentsTab","componentMapProvider","onDragStart","PageTab","onGetTags","imagePreview","setImagePreview","tagOptions","setTagOptions","handlePageAttributeChange","attribute","newAttributes","handleImageUpload","previewUrl","finalImageUrl","handleImageRemove","getTags","tags","statusOptions","tag","status","StatusButton","onClick","icon","label","className","successMessage","errorMessage","setStatus","isLoading","setIsLoading","handleClick","TooltipButton","tooltip","LocaleContext","LocaleProvider","defaultLocale","locale","setLocale","useMobile","isMobile","setIsMobile","checkMobile","StackPageContent","pageid","pageMode","onSaveLayout","onLoadLayout","componentPropsProvider","gobackList","currentMode","setCurrentMode","showEditor","setShowEditor","isEditingTitle","setIsEditingTitle","pageProps","setPageProps","setTitle","pageTitle","setPageTitle","resetKey","setResetKey","setInitialOptions","stackActionsRef","setDropEvent","showGridInfo","setShowGridInfo","handleLoadLayout","handleReload","clearSelectedData","handleGoBack","updateLayoutWithNewProps","updatedChildren","contentObj","handleSave","savedPageProps","handleClear","handleTitleEdit","handleTitleSave","handleTitleKeyDown","handleDragStart","handleDropEvent","handleWidgetSelect","widgetData","instance","getPageInfo","_id","panelStyle","mainContentStyle","tab","StackPage"],"mappings":"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","x_google_ignoreList":[0,1,5,6,7,8,9,17,18,19,20,21,22,23,24,25,26]}